{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","application.js","../tvdml/node_modules/es6-promise/dist/es6-promise.js","../tvdml/node_modules/object-assign/index.js","../tvdml/src/event-bus.js","../tvdml/src/index.js","../tvdml/src/jsx.js","../tvdml/src/navigation.js","../tvdml/src/pipeline.js","../tvdml/src/render.js","../tvdml/src/utils.js","node_modules/browserify/node_modules/process/browser.js","node_modules/plur/index.js","node_modules/plur/node_modules/irregular-plurals/irregular-plurals.json","node_modules/simple-format-number/index.js","src/components/loader.js","src/components/tile.js","src/index.js","src/info.js","src/quality.js","src/request.js","src/request/soap.js","src/routes/all.js","src/routes/auth.js","src/routes/my.js","src/routes/season.js","src/routes/tvshow.js","src/token.js","src/utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","process","global","_typeof","Symbol","iterator","obj","constructor","lib$es6$promise$utils$$objectOrFunction","x","lib$es6$promise$utils$$isFunction","lib$es6$promise$asap$$setScheduler","scheduleFn","lib$es6$promise$asap$$customSchedulerFn","lib$es6$promise$asap$$setAsap","asapFn","lib$es6$promise$asap$$asap","lib$es6$promise$asap$$useNextTick","nextTick","lib$es6$promise$asap$$flush","lib$es6$promise$asap$$useVertxTimer","lib$es6$promise$asap$$vertxNext","lib$es6$promise$asap$$useMutationObserver","iterations","observer","lib$es6$promise$asap$$BrowserMutationObserver","node","document","createTextNode","observe","characterData","data","lib$es6$promise$asap$$useMessageChannel","channel","MessageChannel","port1","onmessage","port2","postMessage","lib$es6$promise$asap$$useSetTimeout","setTimeout","lib$es6$promise$asap$$len","callback","lib$es6$promise$asap$$queue","arg","undefined","lib$es6$promise$asap$$attemptVertx","vertx","runOnLoop","runOnContext","lib$es6$promise$then$$then","onFulfillment","onRejection","parent","this","child","lib$es6$promise$$internal$$noop","lib$es6$promise$$internal$$PROMISE_ID","lib$es6$promise$$internal$$makePromise","state","_state","arguments","lib$es6$promise$$internal$$invokeCallback","_result","lib$es6$promise$$internal$$subscribe","lib$es6$promise$promise$resolve$$resolve","object","Constructor","promise","lib$es6$promise$$internal$$resolve","lib$es6$promise$$internal$$selfFulfillment","TypeError","lib$es6$promise$$internal$$cannotReturnOwn","lib$es6$promise$$internal$$getThen","then","error","lib$es6$promise$$internal$$GET_THEN_ERROR","lib$es6$promise$$internal$$tryThen","value","fulfillmentHandler","rejectionHandler","lib$es6$promise$$internal$$handleForeignThenable","thenable","sealed","lib$es6$promise$$internal$$fulfill","reason","lib$es6$promise$$internal$$reject","_label","lib$es6$promise$$internal$$handleOwnThenable","lib$es6$promise$$internal$$FULFILLED","lib$es6$promise$$internal$$REJECTED","lib$es6$promise$$internal$$handleMaybeThenable","maybeThenable","lib$es6$promise$then$$default","resolve","lib$es6$promise$promise$resolve$$default","lib$es6$promise$$internal$$publishRejection","_onerror","lib$es6$promise$$internal$$publish","lib$es6$promise$$internal$$PENDING","_subscribers","subscribers","settled","detail","lib$es6$promise$$internal$$ErrorObject","lib$es6$promise$$internal$$tryCatch","lib$es6$promise$$internal$$TRY_CATCH_ERROR","succeeded","failed","hasCallback","lib$es6$promise$$internal$$initializePromise","resolver","lib$es6$promise$$internal$$nextId","lib$es6$promise$$internal$$id","lib$es6$promise$promise$all$$all","entries","lib$es6$promise$enumerator$$default","lib$es6$promise$promise$race$$race","lib$es6$promise$utils$$isArray","reject","lib$es6$promise$promise$reject$$reject","lib$es6$promise$promise$$needsResolver","lib$es6$promise$promise$$needsNew","lib$es6$promise$promise$$Promise","lib$es6$promise$enumerator$$Enumerator","input","_instanceConstructor","_input","_remaining","Array","_enumerate","lib$es6$promise$enumerator$$validationError","lib$es6$promise$polyfill$$polyfill","local","self","Function","P","Promise","Object","prototype","toString","cast","lib$es6$promise$promise$$default","lib$es6$promise$utils$$_isArray","isArray","lib$es6$promise$asap$$scheduleFlush","lib$es6$promise$asap$$browserWindow","window","lib$es6$promise$asap$$browserGlobal","MutationObserver","WebKitMutationObserver","lib$es6$promise$asap$$isNode","lib$es6$promise$asap$$isWorker","Uint8ClampedArray","importScripts","Math","random","substring","lib$es6$promise$promise$all$$default","lib$es6$promise$promise$race$$default","lib$es6$promise$promise$reject$$default","all","race","_setScheduler","_setAsap","_asap","catch","_eachEntry","entry","c","_settledAt","_willSettleAt","enumerator","lib$es6$promise$polyfill$$default","lib$es6$promise$umd$$ES6Promise","polyfill","define","_process","2","toObject","val","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","map","join","test3","split","forEach","letter","keys","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","target","source","from","symbols","to","key","getOwnPropertySymbols","3","subscribe","name","subscriptions","pipeline","_pipeline","createPassThroughPipeline","extend","unsubscribe","index","indexOf","splice","push","broadcast","sink","defineProperty","./pipeline","es6-promise","4","_interopRequireDefault","__esModule","default","_render","enumerable","get","_navigation","_es6Promise","_jsx","_eventBus","./event-bus","./jsx","./navigation","./render","5","createElement","tag","attrs","events","_len","children","_key","6","handleRoute","routeName","routes","onSinkStep","step","payload","current","getActiveDocument","route","pipe","render","_jsx2","navigate","params","redirect","launched","targetRoute","navigation","console","NOT_FOUND","event","_utils","EXIT","ERROR","LAUNCH","RELOAD","RESUME","SUSPEND","id","symbol","App","options","info","sessionStorage","setItem","JSON","stringify","_ref","menuItem","menuBar","getAttribute","./utils","7","createPipeline","_ref$chain","chain","passthrough","args","reduce","handler","bind","_objectAssign2","concat","noop","extra","_objectAssign","object-assign","8","template","parseDocument","_payload$navigation","parsedDocument","renderedDocument","hasModal","removeModal","setDocument","navigationDocument","replaceDocument","pushDocument","promisedTimeout","RENDERING_ANIMATION","_navigationDocument","documents","removeDocument","renderModal","_ref2","presentModal","createDocument","dismissModal","createEmptyDocument","stringToDocument","uvdomToDocument","uvdom","element","ownerDocument","_node","_node$attrs","_node$events","collection","filter","setAttribute","feature","getFeature","addEventListener","_ref3","eventName","eventMapper","appendChild","string","parser","parseFromString","DOMImplementationRegistry","getDOMImplementation","childNodes","removeChild","item","DOMParser","onSelect","9","_classCallCheck","instance","timeout","_createClass","defineProperties","props","descriptor","configurable","writable","protoProps","staticProps","_Symbol","10","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","cachedSetTimeout","len","run","cachedClearTimeout","Item","fun","array","clearTimeout","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","11","dup","12","irregularPlurals","str","plural","count","replace","m","isTailLowerCase","slice","toLowerCase","toUpperCase","irregular-plurals","13","addendum","aircraft","alga","alumna","alumnus","amoeba","analysis","antenna","antithesis","apex","appendix","axis","bacillus","bacterium","barracks","basis","beau","bison","bureau","cactus","calf","ch√¢teau","cherub","codex","concerto","corpus","crisis","criterion","curriculum","datum","deer","diagnosis","die","dwarf","echo","elf","elk","ellipsis","embargo","emphasis","erratum","faux pas","fez","firmware","fish","focus","foot","formula","fungus","gallows","genus","goose","graffito","grouse","half","hero","hoof","hypothesis","knife","larva","leaf","libretto","life","loaf","locus","louse","man","matrix","means","medium","memorandum","minutia","moose","mouse","nebula","neurosis","news","nucleus","oasis","offspring","opus","ovum","ox","paralysis","parenthesis","phenomenon","phylum","potato","prognosis","quiz","radius","referendum","salmon","scarf","series","sheep","shelf","shrimp","species","stimulus","stratum","swine","syllabus","symposium","synopsis","synthesis","tableau","that","thesis","thief","tomato","tooth","trout","tuna","vertebra","vertex","veto","vita","vortex","wharf","wife","wolf","woman","14","insertGrouping","grouping","times","floor","insertGroupingRegexp","formatNumber","fractionDigits","useGrouping","decimal","parts","toFixed","integerPart","decimalPart","15","Loader","_ref$attrs","_tvdml","jsx","tvdml","16","Tile","poster","subtitle","_attrs$payload","autoHighlight","link","src","width","height","style","../utils","17","_interopRequireWildcard","newObj","TVDML","_token","token","_loader","_loader2","_my","_my2","_all","_all2","_auth","_auth2","_season","_season2","_tvshow","_tvshow2","onSuccess","ticket","set","expires","./components/loader","./routes/all","./routes/auth","./routes/my","./routes/season","./routes/tvshow","./token","18","parseTVShowPage","sid","_request","request","responseText","infoRegex","infoResult","infoMatch","recomendationsRegex","recomendationsResult","recomendationsMatch","exec","content","result","root","status","textContent","year","duration","country","genres","actors","recomendations","filterDuplicates","parseTVShowSeasonPage","_ref4","season","titleToSlug","_ref5","match","spoilers","traverse","./request","19","getDefault","episode","qualityPreferences","quality","SD","HD","FULLHD","20","invalidateCache","url","timeouts","cache","headers","cId","getUID","requests","response","nativeGET","REQUEST_TTL","post","parameters","nativePOST","_params$data","_params$method","method","GET","_params$prepare","prepare","progress","XMLHttpRequest","XHR","open","POST","setRequestHeader","lengthComputable","loaded","total","send","xhr","min","amount","counter","21","X-Api-Token","User-Agent","../request","../token","22","_soap","tvshow","unwatched","_tile2","_plur2","_plur","_tile","../components/loader","../components/tile","../request/soap","plur","23","gatherInfo","description","secure","_getStartParams","getStartParams","BASEURL","onSubmit","getElementsByTagName","text","loginDocument","passwordDocument","login","password","ok","till","24","renderSectionGrid","header","watching","ongoing","watched","_ref6","closed","_ref7","25","playEpisode","log","videoURL","player","Player","playlist","Playlist","mediaItem","MediaItem","present","showDescription","stopPropagation","_ref$navigation","_info","episodes","Boolean","_quality","theme","title_en","spoiler","episodeIndex","fixSpecialSymbols","minLength","moreLabel","allowsZooming","../info","../quality","26","showFullDescription","_ref8","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","next","done","err","imdb_votes","imdb_rating","kinopoisk_votes","kinopoisk_rating","isWatching","seasons","seasonIndex","season_id","subtitles","episodeCollection","translate","capitalizeText","genre","actor","recomendation","some","_simpleFormatNumber2","_simpleFormatNumber","simple-format-number","27","localStorage","TOKEN","EXPIRES","getItem","Date","now","remove","removeItem","28","message","parse","capitalize","word","charAt"],"mappings":"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","file":"application.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.2.1\n */\n\n(function () {\n  \"use strict\";\n\n  function lib$es6$promise$utils$$objectOrFunction(x) {\n    return typeof x === 'function' || (typeof x === 'undefined' ? 'undefined' : _typeof(x)) === 'object' && x !== null;\n  }\n\n  function lib$es6$promise$utils$$isFunction(x) {\n    return typeof x === 'function';\n  }\n\n  function lib$es6$promise$utils$$isMaybeThenable(x) {\n    return (typeof x === 'undefined' ? 'undefined' : _typeof(x)) === 'object' && x !== null;\n  }\n\n  var lib$es6$promise$utils$$_isArray;\n  if (!Array.isArray) {\n    lib$es6$promise$utils$$_isArray = function lib$es6$promise$utils$$_isArray(x) {\n      return Object.prototype.toString.call(x) === '[object Array]';\n    };\n  } else {\n    lib$es6$promise$utils$$_isArray = Array.isArray;\n  }\n\n  var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n  var lib$es6$promise$asap$$len = 0;\n  var lib$es6$promise$asap$$vertxNext;\n  var lib$es6$promise$asap$$customSchedulerFn;\n\n  var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n    lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n    lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n    lib$es6$promise$asap$$len += 2;\n    if (lib$es6$promise$asap$$len === 2) {\n      // If len is 2, that means that we need to schedule an async flush.\n      // If additional callbacks are queued before the queue is flushed, they\n      // will be processed by this flush that we are scheduling.\n      if (lib$es6$promise$asap$$customSchedulerFn) {\n        lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n      } else {\n        lib$es6$promise$asap$$scheduleFlush();\n      }\n    }\n  };\n\n  function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n    lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n  }\n\n  function lib$es6$promise$asap$$setAsap(asapFn) {\n    lib$es6$promise$asap$$asap = asapFn;\n  }\n\n  var lib$es6$promise$asap$$browserWindow = typeof window !== 'undefined' ? window : undefined;\n  var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n  var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n  var lib$es6$promise$asap$$isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n  // test for web worker but not in IE10\n  var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n  // node\n  function lib$es6$promise$asap$$useNextTick() {\n    // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n    // see https://github.com/cujojs/when/issues/410 for details\n    return function () {\n      process.nextTick(lib$es6$promise$asap$$flush);\n    };\n  }\n\n  // vertx\n  function lib$es6$promise$asap$$useVertxTimer() {\n    return function () {\n      lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n    };\n  }\n\n  function lib$es6$promise$asap$$useMutationObserver() {\n    var iterations = 0;\n    var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n    var node = document.createTextNode('');\n    observer.observe(node, { characterData: true });\n\n    return function () {\n      node.data = iterations = ++iterations % 2;\n    };\n  }\n\n  // web worker\n  function lib$es6$promise$asap$$useMessageChannel() {\n    var channel = new MessageChannel();\n    channel.port1.onmessage = lib$es6$promise$asap$$flush;\n    return function () {\n      channel.port2.postMessage(0);\n    };\n  }\n\n  function lib$es6$promise$asap$$useSetTimeout() {\n    return function () {\n      setTimeout(lib$es6$promise$asap$$flush, 1);\n    };\n  }\n\n  var lib$es6$promise$asap$$queue = new Array(1000);\n  function lib$es6$promise$asap$$flush() {\n    for (var i = 0; i < lib$es6$promise$asap$$len; i += 2) {\n      var callback = lib$es6$promise$asap$$queue[i];\n      var arg = lib$es6$promise$asap$$queue[i + 1];\n\n      callback(arg);\n\n      lib$es6$promise$asap$$queue[i] = undefined;\n      lib$es6$promise$asap$$queue[i + 1] = undefined;\n    }\n\n    lib$es6$promise$asap$$len = 0;\n  }\n\n  function lib$es6$promise$asap$$attemptVertx() {\n    try {\n      var r = require;\n      var vertx = r('vertx');\n      lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n      return lib$es6$promise$asap$$useVertxTimer();\n    } catch (e) {\n      return lib$es6$promise$asap$$useSetTimeout();\n    }\n  }\n\n  var lib$es6$promise$asap$$scheduleFlush;\n  // Decide what async method to use to triggering processing of queued callbacks:\n  if (lib$es6$promise$asap$$isNode) {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n  } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n  } else if (lib$es6$promise$asap$$isWorker) {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n  } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n  } else {\n    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n  }\n  function lib$es6$promise$then$$then(onFulfillment, onRejection) {\n    var parent = this;\n\n    var child = new this.constructor(lib$es6$promise$$internal$$noop);\n\n    if (child[lib$es6$promise$$internal$$PROMISE_ID] === undefined) {\n      lib$es6$promise$$internal$$makePromise(child);\n    }\n\n    var state = parent._state;\n\n    if (state) {\n      var callback = arguments[state - 1];\n      lib$es6$promise$asap$$asap(function () {\n        lib$es6$promise$$internal$$invokeCallback(state, child, callback, parent._result);\n      });\n    } else {\n      lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n    }\n\n    return child;\n  }\n  var lib$es6$promise$then$$default = lib$es6$promise$then$$then;\n  function lib$es6$promise$promise$resolve$$resolve(object) {\n    /*jshint validthis:true */\n    var Constructor = this;\n\n    if (object && (typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object' && object.constructor === Constructor) {\n      return object;\n    }\n\n    var promise = new Constructor(lib$es6$promise$$internal$$noop);\n    lib$es6$promise$$internal$$resolve(promise, object);\n    return promise;\n  }\n  var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n  var lib$es6$promise$$internal$$PROMISE_ID = Math.random().toString(36).substring(16);\n\n  function lib$es6$promise$$internal$$noop() {}\n\n  var lib$es6$promise$$internal$$PENDING = void 0;\n  var lib$es6$promise$$internal$$FULFILLED = 1;\n  var lib$es6$promise$$internal$$REJECTED = 2;\n\n  var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n  function lib$es6$promise$$internal$$selfFulfillment() {\n    return new TypeError(\"You cannot resolve a promise with itself\");\n  }\n\n  function lib$es6$promise$$internal$$cannotReturnOwn() {\n    return new TypeError('A promises callback cannot return that same promise.');\n  }\n\n  function lib$es6$promise$$internal$$getThen(promise) {\n    try {\n      return promise.then;\n    } catch (error) {\n      lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n      return lib$es6$promise$$internal$$GET_THEN_ERROR;\n    }\n  }\n\n  function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n    try {\n      then.call(value, fulfillmentHandler, rejectionHandler);\n    } catch (e) {\n      return e;\n    }\n  }\n\n  function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n    lib$es6$promise$asap$$asap(function (promise) {\n      var sealed = false;\n      var error = lib$es6$promise$$internal$$tryThen(then, thenable, function (value) {\n        if (sealed) {\n          return;\n        }\n        sealed = true;\n        if (thenable !== value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, value);\n        }\n      }, function (reason) {\n        if (sealed) {\n          return;\n        }\n        sealed = true;\n\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n      if (!sealed && error) {\n        sealed = true;\n        lib$es6$promise$$internal$$reject(promise, error);\n      }\n    }, promise);\n  }\n\n  function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n    if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n      lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n    } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n      lib$es6$promise$$internal$$reject(promise, thenable._result);\n    } else {\n      lib$es6$promise$$internal$$subscribe(thenable, undefined, function (value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }, function (reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      });\n    }\n  }\n\n  function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n    if (maybeThenable.constructor === promise.constructor && then === lib$es6$promise$then$$default && constructor.resolve === lib$es6$promise$promise$resolve$$default) {\n      lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n    } else {\n      if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n      } else if (then === undefined) {\n        lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n      } else if (lib$es6$promise$utils$$isFunction(then)) {\n        lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n      }\n    }\n  }\n\n  function lib$es6$promise$$internal$$resolve(promise, value) {\n    if (promise === value) {\n      lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n    } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n      lib$es6$promise$$internal$$handleMaybeThenable(promise, value, lib$es6$promise$$internal$$getThen(value));\n    } else {\n      lib$es6$promise$$internal$$fulfill(promise, value);\n    }\n  }\n\n  function lib$es6$promise$$internal$$publishRejection(promise) {\n    if (promise._onerror) {\n      promise._onerror(promise._result);\n    }\n\n    lib$es6$promise$$internal$$publish(promise);\n  }\n\n  function lib$es6$promise$$internal$$fulfill(promise, value) {\n    if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n      return;\n    }\n\n    promise._result = value;\n    promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n    if (promise._subscribers.length !== 0) {\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n    }\n  }\n\n  function lib$es6$promise$$internal$$reject(promise, reason) {\n    if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n      return;\n    }\n    promise._state = lib$es6$promise$$internal$$REJECTED;\n    promise._result = reason;\n\n    lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n  }\n\n  function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n    var subscribers = parent._subscribers;\n    var length = subscribers.length;\n\n    parent._onerror = null;\n\n    subscribers[length] = child;\n    subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n    subscribers[length + lib$es6$promise$$internal$$REJECTED] = onRejection;\n\n    if (length === 0 && parent._state) {\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n    }\n  }\n\n  function lib$es6$promise$$internal$$publish(promise) {\n    var subscribers = promise._subscribers;\n    var settled = promise._state;\n\n    if (subscribers.length === 0) {\n      return;\n    }\n\n    var child,\n        callback,\n        detail = promise._result;\n\n    for (var i = 0; i < subscribers.length; i += 3) {\n      child = subscribers[i];\n      callback = subscribers[i + settled];\n\n      if (child) {\n        lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n      } else {\n        callback(detail);\n      }\n    }\n\n    promise._subscribers.length = 0;\n  }\n\n  function lib$es6$promise$$internal$$ErrorObject() {\n    this.error = null;\n  }\n\n  var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n  function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n    try {\n      return callback(detail);\n    } catch (e) {\n      lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n      return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n    }\n  }\n\n  function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n    var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n        value,\n        error,\n        succeeded,\n        failed;\n\n    if (hasCallback) {\n      value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n      if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n        failed = true;\n        error = value.error;\n        value = null;\n      } else {\n        succeeded = true;\n      }\n\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n        return;\n      }\n    } else {\n      value = detail;\n      succeeded = true;\n    }\n\n    if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n      // noop\n    } else if (hasCallback && succeeded) {\n      lib$es6$promise$$internal$$resolve(promise, value);\n    } else if (failed) {\n      lib$es6$promise$$internal$$reject(promise, error);\n    } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n      lib$es6$promise$$internal$$fulfill(promise, value);\n    } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n      lib$es6$promise$$internal$$reject(promise, value);\n    }\n  }\n\n  function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n    try {\n      resolver(function resolvePromise(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }, function rejectPromise(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      });\n    } catch (e) {\n      lib$es6$promise$$internal$$reject(promise, e);\n    }\n  }\n\n  var lib$es6$promise$$internal$$id = 0;\n  function lib$es6$promise$$internal$$nextId() {\n    return lib$es6$promise$$internal$$id++;\n  }\n\n  function lib$es6$promise$$internal$$makePromise(promise) {\n    promise[lib$es6$promise$$internal$$PROMISE_ID] = lib$es6$promise$$internal$$id++;\n    promise._state = undefined;\n    promise._result = undefined;\n    promise._subscribers = [];\n  }\n\n  function lib$es6$promise$promise$all$$all(entries) {\n    return new lib$es6$promise$enumerator$$default(this, entries).promise;\n  }\n  var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n  function lib$es6$promise$promise$race$$race(entries) {\n    /*jshint validthis:true */\n    var Constructor = this;\n\n    if (!lib$es6$promise$utils$$isArray(entries)) {\n      return new Constructor(function (resolve, reject) {\n        reject(new TypeError('You must pass an array to race.'));\n      });\n    } else {\n      return new Constructor(function (resolve, reject) {\n        var length = entries.length;\n        for (var i = 0; i < length; i++) {\n          Constructor.resolve(entries[i]).then(resolve, reject);\n        }\n      });\n    }\n  }\n  var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n  function lib$es6$promise$promise$reject$$reject(reason) {\n    /*jshint validthis:true */\n    var Constructor = this;\n    var promise = new Constructor(lib$es6$promise$$internal$$noop);\n    lib$es6$promise$$internal$$reject(promise, reason);\n    return promise;\n  }\n  var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n  function lib$es6$promise$promise$$needsResolver() {\n    throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n  }\n\n  function lib$es6$promise$promise$$needsNew() {\n    throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n  }\n\n  var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n  /**\n    Promise objects represent the eventual result of an asynchronous operation. The\n    primary way of interacting with a promise is through its `then` method, which\n    registers callbacks to receive either a promise's eventual value or the reason\n    why the promise cannot be fulfilled.\n     Terminology\n    -----------\n     - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n    - `thenable` is an object or function that defines a `then` method.\n    - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n    - `exception` is a value that is thrown using the throw statement.\n    - `reason` is a value that indicates why a promise was rejected.\n    - `settled` the final resting state of a promise, fulfilled or rejected.\n     A promise can be in one of three states: pending, fulfilled, or rejected.\n     Promises that are fulfilled have a fulfillment value and are in the fulfilled\n    state.  Promises that are rejected have a rejection reason and are in the\n    rejected state.  A fulfillment value is never a thenable.\n     Promises can also be said to *resolve* a value.  If this value is also a\n    promise, then the original promise's settled state will match the value's\n    settled state.  So a promise that *resolves* a promise that rejects will\n    itself reject, and a promise that *resolves* a promise that fulfills will\n    itself fulfill.\n      Basic Usage:\n    ------------\n     ```js\n    var promise = new Promise(function(resolve, reject) {\n      // on success\n      resolve(value);\n       // on failure\n      reject(reason);\n    });\n     promise.then(function(value) {\n      // on fulfillment\n    }, function(reason) {\n      // on rejection\n    });\n    ```\n     Advanced Usage:\n    ---------------\n     Promises shine when abstracting away asynchronous interactions such as\n    `XMLHttpRequest`s.\n     ```js\n    function getJSON(url) {\n      return new Promise(function(resolve, reject){\n        var xhr = new XMLHttpRequest();\n         xhr.open('GET', url);\n        xhr.onreadystatechange = handler;\n        xhr.responseType = 'json';\n        xhr.setRequestHeader('Accept', 'application/json');\n        xhr.send();\n         function handler() {\n          if (this.readyState === this.DONE) {\n            if (this.status === 200) {\n              resolve(this.response);\n            } else {\n              reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n            }\n          }\n        };\n      });\n    }\n     getJSON('/posts.json').then(function(json) {\n      // on fulfillment\n    }, function(reason) {\n      // on rejection\n    });\n    ```\n     Unlike callbacks, promises are great composable primitives.\n     ```js\n    Promise.all([\n      getJSON('/posts'),\n      getJSON('/comments')\n    ]).then(function(values){\n      values[0] // => postsJSON\n      values[1] // => commentsJSON\n       return values;\n    });\n    ```\n     @class Promise\n    @param {function} resolver\n    Useful for tooling.\n    @constructor\n  */\n  function lib$es6$promise$promise$$Promise(resolver) {\n    this[lib$es6$promise$$internal$$PROMISE_ID] = lib$es6$promise$$internal$$nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (lib$es6$promise$$internal$$noop !== resolver) {\n      typeof resolver !== 'function' && lib$es6$promise$promise$$needsResolver();\n      this instanceof lib$es6$promise$promise$$Promise ? lib$es6$promise$$internal$$initializePromise(this, resolver) : lib$es6$promise$promise$$needsNew();\n    }\n  }\n\n  lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n  lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n  lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n  lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n  lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n  lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n  lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n  lib$es6$promise$promise$$Promise.prototype = {\n    constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n       ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n       Chaining\n      --------\n       The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n       ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n       findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n       ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n       Assimilation\n      ------------\n       Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n       ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n       If the assimliated promise rejects, then the downstream promise will also reject.\n       ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n       Simple Example\n      --------------\n       Synchronous Example\n       ```javascript\n      var result;\n       try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n       Errback Example\n       ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n       Promise Example;\n       ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n       Advanced Example\n      --------------\n       Synchronous Example\n       ```javascript\n      var author, books;\n       try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n       Errback Example\n       ```js\n       function foundBooks(books) {\n       }\n       function failure(reason) {\n       }\n       findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n       Promise Example;\n       ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n       @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n    then: lib$es6$promise$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n       ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n       // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n       // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n       @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n    'catch': function _catch(onRejection) {\n      return this.then(null, onRejection);\n    }\n  };\n  var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n  function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n    if (!this.promise[lib$es6$promise$$internal$$PROMISE_ID]) {\n      lib$es6$promise$$internal$$makePromise(this.promise);\n    }\n\n    if (lib$es6$promise$utils$$isArray(input)) {\n      this._input = input;\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate();\n        if (this._remaining === 0) {\n          lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      lib$es6$promise$$internal$$reject(this.promise, lib$es6$promise$enumerator$$validationError());\n    }\n  }\n\n  function lib$es6$promise$enumerator$$validationError() {\n    return new Error('Array Methods must be provided an Array');\n  }\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function () {\n    var length = this.length;\n    var input = this._input;\n\n    for (var i = 0; this._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function (entry, i) {\n    var c = this._instanceConstructor;\n    var resolve = c.resolve;\n\n    if (resolve === lib$es6$promise$promise$resolve$$default) {\n      var then = lib$es6$promise$$internal$$getThen(entry);\n\n      if (then === lib$es6$promise$then$$default && entry._state !== lib$es6$promise$$internal$$PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === lib$es6$promise$promise$$default) {\n        var promise = new c(lib$es6$promise$$internal$$noop);\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, entry, then);\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve) {\n          resolve(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve(entry), i);\n    }\n  };\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function (state, i, value) {\n    var promise = this.promise;\n\n    if (promise._state === lib$es6$promise$$internal$$PENDING) {\n      this._remaining--;\n\n      if (state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      lib$es6$promise$$internal$$fulfill(promise, this._result);\n    }\n  };\n\n  lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function (promise, i) {\n    var enumerator = this;\n\n    lib$es6$promise$$internal$$subscribe(promise, undefined, function (value) {\n      enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n    }, function (reason) {\n      enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n    });\n  };\n  function lib$es6$promise$polyfill$$polyfill() {\n    var local;\n\n    if (typeof global !== 'undefined') {\n      local = global;\n    } else if (typeof self !== 'undefined') {\n      local = self;\n    } else {\n      try {\n        local = Function('return this')();\n      } catch (e) {\n        throw new Error('polyfill failed because global object is unavailable in this environment');\n      }\n    }\n\n    var P = local.Promise;\n\n    if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n      return;\n    }\n\n    local.Promise = lib$es6$promise$promise$$default;\n  }\n  var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n  var lib$es6$promise$umd$$ES6Promise = {\n    'Promise': lib$es6$promise$promise$$default,\n    'polyfill': lib$es6$promise$polyfill$$default\n  };\n\n  /* global define:true module:true window: true */\n  if (typeof define === 'function' && define['amd']) {\n    define(function () {\n      return lib$es6$promise$umd$$ES6Promise;\n    });\n  } else if (typeof module !== 'undefined' && module['exports']) {\n    module['exports'] = lib$es6$promise$umd$$ES6Promise;\n  } else if (typeof this !== 'undefined') {\n    this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n  }\n\n  lib$es6$promise$polyfill$$default();\n}).call(undefined);\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"_process\":10}],2:[function(require,module,exports){\n'use strict';\n/* eslint-disable no-unused-vars */\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc'); // eslint-disable-line\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (e) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.subscribe = subscribe;\nexports.broadcast = broadcast;\n\nvar _pipeline = require('./pipeline');\n\nvar _es6Promise = require('es6-promise');\n\nvar subscriptions = {};\n\nfunction subscribe(name) {\n\tif (!subscriptions[name]) {\n\t\tsubscriptions[name] = [];\n\t}\n\n\tvar pipeline = (0, _pipeline.createPassThroughPipeline)({\n\t\textend: {\n\t\t\tunsubscribe: function unsubscribe() {\n\t\t\t\tvar index = subscriptions[name].indexOf(pipeline);\n\n\t\t\t\tif (~index) {\n\t\t\t\t\tsubscriptions[name].splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tsubscriptions[name].push(pipeline);\n\n\treturn pipeline;\n}\n\nfunction broadcast(name, data) {\n\t(subscriptions[name] || []).forEach(function (pipeline) {\n\t\treturn pipeline.sink(data);\n\t});\n}\n\n},{\"./pipeline\":7,\"es6-promise\":1}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _render = require('./render');\n\nObject.keys(_render).forEach(function (key) {\n  if (key === \"default\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _render[key];\n    }\n  });\n});\n\nvar _pipeline = require('./pipeline');\n\nObject.keys(_pipeline).forEach(function (key) {\n  if (key === \"default\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _pipeline[key];\n    }\n  });\n});\n\nvar _navigation = require('./navigation');\n\nObject.keys(_navigation).forEach(function (key) {\n  if (key === \"default\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _navigation[key];\n    }\n  });\n});\n\nvar _es6Promise = require('es6-promise');\n\nObject.defineProperty(exports, 'Promise', {\n  enumerable: true,\n  get: function get() {\n    return _es6Promise.Promise;\n  }\n});\n\nvar _jsx = require('./jsx');\n\nObject.defineProperty(exports, 'jsx', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_jsx).default;\n  }\n});\n\nvar _eventBus = require('./event-bus');\n\nObject.defineProperty(exports, 'subscribe', {\n  enumerable: true,\n  get: function get() {\n    return _eventBus.subscribe;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"./event-bus\":3,\"./jsx\":5,\"./navigation\":6,\"./pipeline\":7,\"./render\":8,\"es6-promise\":1}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = createElement;\nfunction createElement(tag, attrs) {\n\tvar node = { tag: tag };\n\n\tif (attrs) {\n\t\tObject.keys(attrs).forEach(function (name) {\n\t\t\tif (typeof attrs[name] === 'function') {\n\t\t\t\tnode.events || (node.events = {});\n\t\t\t\tnode.events[name] = attrs[name];\n\t\t\t} else {\n\t\t\t\tnode.attrs || (node.attrs = {});\n\t\t\t\tnode.attrs[name] = attrs[name];\n\t\t\t}\n\t\t});\n\t}\n\n\tfor (var _len = arguments.length, children = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n\t\tchildren[_key - 2] = arguments[_key];\n\t}\n\n\tif (children.length === 1) {\n\t\tnode.children = children[0];\n\t} else if (children.length > 1) {\n\t\tnode.children = children;\n\t}\n\n\treturn node;\n}\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.route = exports.event = undefined;\nexports.handleRoute = handleRoute;\nexports.navigate = navigate;\nexports.redirect = redirect;\n\nvar _pipeline = require('./pipeline');\n\nvar _eventBus = require('./event-bus');\n\nvar _es6Promise = require('es6-promise');\n\nvar _render = require('./render');\n\nvar _utils = require('./utils');\n\nvar _jsx = require('./jsx');\n\nvar _jsx2 = _interopRequireDefault(_jsx);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/** @jsx jsx */\n\nvar launched = false;\n\nvar routes = {};\n\nvar event = exports.event = {\n\tEXIT: new _utils.Symbol('onExit'),\n\tERROR: new _utils.Symbol('onError'),\n\tLAUNCH: new _utils.Symbol('onLaunch'),\n\tRELOAD: new _utils.Symbol('onReload'),\n\tRESUME: new _utils.Symbol('onResume'),\n\tSUSPEND: new _utils.Symbol('onSuspend')\n};\n\nvar route = exports.route = {\n\tNOT_FOUND: new _utils.Symbol('Not found')\n};\n\nfunction handleRoute(routeName) {\n\tif (!routeName) {\n\t\tthrow new Error('Route handler need route to process');\n\t}\n\n\tif (routes[routeName]) {\n\t\tthrow new Error('Handler for \"' + routeName + '\" is already specified');\n\t}\n\n\treturn routes[routeName] = (0, _pipeline.createPassThroughPipeline)({\n\t\tonSinkStep: function onSinkStep(step, payload) {\n\t\t\tvar current = getActiveDocument();\n\n\t\t\tif (step && current && current.route !== routeName) {\n\t\t\t\tthrow 'Processing route \"' + routeName + '\" isn\\'t active. Terminating pipeline...';\n\t\t\t}\n\t\t\treturn payload;\n\t\t}\n\t}).pipe((0, _render.render)((0, _jsx2.default)('document', null)));\n}\n\nfunction navigate(routeName, params) {\n\tvar redirect = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\n\tif (!launched) {\n\t\tthrow new Error('Can\\'t process navigation before app is launched');\n\t}\n\n\tvar targetRoute = routes[routeName];\n\n\tif (targetRoute) {\n\t\treturn targetRoute.sink({\n\t\t\troute: routeName,\n\t\t\tnavigation: params,\n\t\t\tredirect: redirect\n\t\t});\n\t}\n\n\tconsole.error('Unable to resolve route \"' + routeName + '\"');\n\n\tif (routeName !== route.NOT_FOUND) {\n\t\treturn navigate(route.NOT_FOUND, params);\n\t}\n}\n\nfunction redirect(routeName, params) {\n\treturn navigate(routeName, params, true);\n}\n\nObject.keys(event).forEach(function (id) {\n\tvar symbol = event[id];\n\tvar name = symbol.toString();\n\n\tApp[name] = function (options) {\n\t\tconsole.info('Fired handler for app lifecycle', name, options);\n\n\t\tif (name === 'onLaunch') {\n\t\t\tsessionStorage.setItem('startParams', JSON.stringify(options));\n\t\t\tlaunched = true;\n\t\t}\n\t\t(0, _eventBus.broadcast)(symbol);\n\t};\n});\n\n(0, _eventBus.subscribe)('menu-item-select').pipe(function (_ref) {\n\tvar menuItem = _ref.menuItem;\n\tvar menuBar = _ref.menuBar;\n\n\tvar route = menuItem.getAttribute('route');\n\n\tif (route) {\n\t\tnavigate(route, { menuItem: menuItem, menuBar: menuBar });\n\t}\n});\n\n},{\"./event-bus\":3,\"./jsx\":5,\"./pipeline\":7,\"./render\":8,\"./utils\":9,\"es6-promise\":1}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nexports.createPipeline = createPipeline;\nexports.createPassThroughPipeline = createPassThroughPipeline;\nexports.passthrough = passthrough;\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _es6Promise = require('es6-promise');\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createPipeline() {\n\tvar options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\tvar _ref = this || {};\n\n\tvar _ref$chain = _ref.chain;\n\tvar chain = _ref$chain === undefined ? [] : _ref$chain;\n\tvar passthrough = _ref.passthrough;\n\n\n\tvar pipeline = function pipeline() {\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn function (payload) {\n\t\t\treturn chain.reduce(function (target, handler, i) {\n\t\t\t\treturn target.then((options.onSinkStep || onSinkStep).bind(null, i)).then(handler);\n\t\t\t}, _es6Promise.Promise.resolve((0, _objectAssign2.default)({}, payload, { args: args }))).catch(function (error) {\n\t\t\t\treturn console.error(error);\n\t\t\t});\n\t\t};\n\t};\n\n\treturn (0, _objectAssign2.default)(pipeline, options.extend, {\n\t\tpipe: function pipe(handler) {\n\t\t\tif (typeof handler.pipe === 'function') {\n\t\t\t\thandler = handler();\n\t\t\t}\n\n\t\t\tif (passthrough) {\n\t\t\t\tchain.push(handler);\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\treturn createPipeline.call({ chain: chain.concat(handler) }, options);\n\t\t},\n\t\tsink: function sink(payload) {\n\t\t\treturn pipeline()(payload);\n\t\t}\n\t});\n}\n\nfunction createPassThroughPipeline(options) {\n\treturn createPipeline.call({ passthrough: true }, options);\n}\n\nfunction passthrough() {\n\tvar handler = arguments.length <= 0 || arguments[0] === undefined ? (0, _utils.noop)() : arguments[0];\n\n\treturn function (payload) {\n\t\treturn _es6Promise.Promise.resolve(handler(payload)).then(function (extra) {\n\t\t\tif (extra == null || (typeof extra === 'undefined' ? 'undefined' : _typeof(extra)) !== 'object') return payload;\n\t\t\treturn (0, _objectAssign2.default)({}, payload, extra);\n\t\t});\n\t};\n}\n\nfunction onSinkStep(step, payload) {\n\treturn payload;\n}\n\n},{\"./utils\":9,\"es6-promise\":1,\"object-assign\":2}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nexports.render = render;\nexports.renderModal = renderModal;\nexports.parseDocument = parseDocument;\nexports.removeModal = removeModal;\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _es6Promise = require('es6-promise');\n\nvar _eventBus = require('./event-bus');\n\nvar _utils = require('./utils');\n\nvar _pipeline = require('./pipeline');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar hasModal = false;\nvar documentSwitching = _es6Promise.Promise.resolve();\n\nvar RENDERING_ANIMATION = 500;\n\nvar parser = new DOMParser();\n\nvar eventMapper = {\n\t'onSelect': 'select'\n};\n\nfunction render(template) {\n\treturn (0, _pipeline.createPipeline)().pipe(parseDocument(template)).pipe((0, _pipeline.passthrough)(function (payload) {\n\t\tvar route = payload.route;\n\t\tvar _payload$navigation = payload.navigation;\n\t\tvar navigation = _payload$navigation === undefined ? {} : _payload$navigation;\n\t\tvar document = payload.parsedDocument;\n\t\tvar renderedDocument = payload.document;\n\t\tvar menuBar = navigation.menuBar;\n\t\tvar menuItem = navigation.menuItem;\n\n\n\t\tdocument.route = route;\n\n\t\tif (hasModal) removeModal();\n\n\t\tif (menuBar && menuItem) {\n\t\t\tmenuBar.setDocument(document, menuItem);\n\t\t} else if (renderedDocument) {\n\t\t\tnavigationDocument.replaceDocument(document, renderedDocument);\n\t\t} else {\n\t\t\tnavigationDocument.pushDocument(document);\n\t\t}\n\n\t\treturn { document: document };\n\t})).pipe((0, _pipeline.passthrough)(function () {\n\t\treturn (0, _utils.promisedTimeout)(RENDERING_ANIMATION);\n\t})).pipe((0, _pipeline.passthrough)(function (_ref) {\n\t\tvar redirect = _ref.redirect;\n\n\t\tif (redirect) {\n\t\t\tvar _navigationDocument = navigationDocument;\n\t\t\tvar documents = _navigationDocument.documents;\n\n\t\t\tvar document = documents[documents.length - 2];\n\n\t\t\tdocument && navigationDocument.removeDocument(document);\n\t\t}\n\n\t\treturn { redirect: false };\n\t}));\n}\n\nfunction renderModal(template) {\n\treturn (0, _pipeline.createPipeline)().pipe((0, _pipeline.passthrough)(function () {\n\t\tif (!hasModal) return;\n\t\tremoveModal();\n\t\treturn (0, _utils.promisedTimeout)(RENDERING_ANIMATION);\n\t})).pipe(parseDocument(template)).pipe((0, _pipeline.passthrough)(function (_ref2) {\n\t\tvar document = _ref2.parsedDocument;\n\t\tvar route = _ref2.route;\n\n\t\thasModal = true;\n\t\tdocument.route = route;\n\t\tnavigationDocument.presentModal(document);\n\t}));\n}\n\nfunction parseDocument(template) {\n\treturn (0, _pipeline.createPipeline)().pipe(function (payload) {\n\t\treturn (0, _objectAssign2.default)({}, payload, {\n\t\t\tparsedDocument: createDocument(template, payload)\n\t\t});\n\t});\n}\n\nfunction removeModal() {\n\thasModal = false;\n\tnavigationDocument.dismissModal();\n}\n\nfunction createDocument(template, payload) {\n\tif (typeof template === 'function') {\n\t\ttemplate = template(payload);\n\t}\n\n\tif (template == null) {\n\t\treturn createEmptyDocument();\n\t}\n\n\tif (typeof template === 'string') {\n\t\treturn stringToDocument(template);\n\t}\n\n\tif ((typeof template === 'undefined' ? 'undefined' : _typeof(template)) === 'object') {\n\t\treturn uvdomToDocument(template);\n\t}\n\n\treturn null;\n}\n\nfunction uvdomToDocument(uvdom) {\n\tvar document = arguments.length <= 1 || arguments[1] === undefined ? createEmptyDocument() : arguments[1];\n\n\t[].concat(uvdom || []).forEach(function (node) {\n\t\tvar element = void 0;\n\n\t\tif (node == null) return;\n\n\t\tif (typeof node === 'string') {\n\t\t\telement = document.ownerDocument.createTextNode(node);\n\t\t} else {\n\t\t\t(function () {\n\t\t\t\tif (typeof node.tag === 'function') {\n\t\t\t\t\tnode = node.tag(node);\n\t\t\t\t}\n\n\t\t\t\tvar _node = node;\n\t\t\t\tvar tag = _node.tag;\n\t\t\t\tvar _node$attrs = _node.attrs;\n\t\t\t\tvar attrs = _node$attrs === undefined ? {} : _node$attrs;\n\t\t\t\tvar _node$events = _node.events;\n\t\t\t\tvar events = _node$events === undefined ? {} : _node$events;\n\n\n\t\t\t\telement = document.ownerDocument.createElement(tag);\n\n\t\t\t\tvar children = [].concat(node.children || []).reduce(function (collection, child) {\n\t\t\t\t\treturn collection.concat(child);\n\t\t\t\t}, []).map(function (child) {\n\t\t\t\t\tif (typeof child === 'number') {\n\t\t\t\t\t\treturn child.toString();\n\t\t\t\t\t}\n\t\t\t\t\treturn child;\n\t\t\t\t}).filter(function (child) {\n\t\t\t\t\treturn typeof child === 'string' || child && child.tag;\n\t\t\t\t});\n\n\t\t\t\tObject.keys(attrs).forEach(function (name) {\n\t\t\t\t\tif (typeof attrs[name] !== 'undefined') {\n\t\t\t\t\t\telement.setAttribute(name, attrs[name]);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (tag === 'menuBar') {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tvar feature = element.getFeature('MenuBarDocument');\n\n\t\t\t\t\t\telement.addEventListener('select', function (_ref3) {\n\t\t\t\t\t\t\tvar target = _ref3.target;\n\n\t\t\t\t\t\t\t(0, _eventBus.broadcast)('menu-item-select', {\n\t\t\t\t\t\t\t\tmenuItem: target,\n\t\t\t\t\t\t\t\tmenuBar: feature\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t})();\n\t\t\t\t}\n\n\t\t\t\tObject.keys(events).forEach(function (name) {\n\t\t\t\t\tvar eventName = eventMapper[name] || name;\n\t\t\t\t\telement.addEventListener(eventName, events[name]);\n\t\t\t\t});\n\n\t\t\t\tuvdomToDocument(children, element);\n\t\t\t})();\n\t\t}\n\n\t\telement != null && document.appendChild(element);\n\t});\n\n\treturn document;\n}\n\nfunction stringToDocument(string) {\n\treturn parser.parseFromString(string, 'application/xml');\n}\n\nfunction createEmptyDocument() {\n\tvar document = DOMImplementationRegistry.getDOMImplementation().createDocument();\n\n\tfor (var i = 0, length = document.childNodes.length; i < length; i++) {\n\t\tdocument.removeChild(document.childNodes.item(i));\n\t}\n\n\treturn document;\n}\n\n},{\"./event-bus\":3,\"./pipeline\":7,\"./utils\":9,\"es6-promise\":1,\"object-assign\":2}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Symbol = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.noop = noop;\nexports.promisedTimeout = promisedTimeout;\n\nvar _es6Promise = require('es6-promise');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction noop() {\n\treturn function () {};\n}\n\nfunction promisedTimeout(timeout) {\n\treturn new _es6Promise.Promise(function (resolve) {\n\t\treturn setTimeout(resolve, timeout);\n\t});\n}\n\nvar _Symbol = function () {\n\tfunction _Symbol(name) {\n\t\t_classCallCheck(this, _Symbol);\n\n\t\tthis.name = name;\n\t}\n\n\t_createClass(_Symbol, [{\n\t\tkey: 'toString',\n\t\tvalue: function toString() {\n\t\t\treturn this.name;\n\t\t}\n\t}]);\n\n\treturn _Symbol;\n}();\n\nexports.Symbol = _Symbol;\n\n},{\"es6-promise\":1}],10:[function(require,module,exports){\n'use strict';\n\n// shim for using process in browser\n\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\n(function () {\n    try {\n        cachedSetTimeout = setTimeout;\n    } catch (e) {\n        cachedSetTimeout = function cachedSetTimeout() {\n            throw new Error('setTimeout is not defined');\n        };\n    }\n    try {\n        cachedClearTimeout = clearTimeout;\n    } catch (e) {\n        cachedClearTimeout = function cachedClearTimeout() {\n            throw new Error('clearTimeout is not defined');\n        };\n    }\n})();\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = cachedSetTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while (len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    cachedClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        cachedSetTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () {\n    return '/';\n};\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function () {\n    return 0;\n};\n\n},{}],11:[function(require,module,exports){\narguments[4][2][0].apply(exports,arguments)\n},{\"dup\":2}],12:[function(require,module,exports){\n'use strict';\n\nvar irregularPlurals = require('irregular-plurals');\n\nmodule.exports = function (str, plural, count) {\n\tif (typeof plural === 'number') {\n\t\tcount = plural;\n\t}\n\n\tif (str in irregularPlurals) {\n\t\tplural = irregularPlurals[str];\n\t} else if (typeof plural !== 'string') {\n\t\tplural = (str.replace(/(?:s|x|z|ch|sh)$/i, '$&e').replace(/([^aeiou])y$/i, '$1ie') + 's').replace(/i?e?s$/i, function (m) {\n\t\t\tvar isTailLowerCase = str.slice(-1) === str.slice(-1).toLowerCase();\n\t\t\treturn isTailLowerCase ? m.toLowerCase() : m.toUpperCase();\n\t\t});\n\t}\n\n\treturn count === 1 ? str : plural;\n};\n\n},{\"irregular-plurals\":13}],13:[function(require,module,exports){\nmodule.exports={\n\t\"addendum\": \"addenda\",\n\t\"aircraft\": \"aircraft\",\n\t\"alga\": \"algae\",\n\t\"alumna\": \"alumnae\",\n\t\"alumnus\": \"alumni\",\n\t\"amoeba\": \"amoebae\",\n\t\"analysis\": \"analyses\",\n\t\"antenna\": \"antennae\",\n\t\"antithesis\": \"antitheses\",\n\t\"apex\": \"apices\",\n\t\"appendix\": \"appendices\",\n\t\"axis\": \"axes\",\n\t\"bacillus\": \"bacilli\",\n\t\"bacterium\": \"bacteria\",\n\t\"barracks\": \"barracks\",\n\t\"basis\": \"bases\",\n\t\"beau\": \"beaux\",\n\t\"bison\": \"bison\",\n\t\"bureau\": \"bureaus\",\n\t\"cactus\": \"cacti\",\n\t\"calf\": \"calves\",\n\t\"child\": \"children\",\n\t\"ch√¢teau\": \"ch√¢teaus\",\n\t\"cherub\": \"cherubim\",\n\t\"codex\": \"codices\",\n\t\"concerto\": \"concerti\",\n\t\"corpus\": \"corpora\",\n\t\"crisis\": \"crises\",\n\t\"criterion\": \"criteria\",\n\t\"curriculum\": \"curricula\",\n\t\"datum\": \"data\",\n\t\"deer\": \"deer\",\n\t\"diagnosis\": \"diagnoses\",\n\t\"die\": \"dice\",\n\t\"dwarf\": \"dwarfs\",\n\t\"echo\": \"echoes\",\n\t\"elf\": \"elves\",\n\t\"elk\": \"elk\",\n\t\"ellipsis\": \"ellipses\",\n\t\"embargo\": \"embargoes\",\n\t\"emphasis\": \"emphases\",\n\t\"erratum\": \"errata\",\n\t\"faux pas\": \"faux pas\",\n\t\"fez\": \"fezes\",\n\t\"firmware\": \"firmware\",\n\t\"fish\": \"fish\",\n\t\"focus\": \"foci\",\n\t\"foot\": \"feet\",\n\t\"formula\": \"formulae\",\n\t\"fungus\": \"fungi\",\n\t\"gallows\": \"gallows\",\n\t\"genus\": \"genera\",\n\t\"goose\": \"geese\",\n\t\"graffito\": \"graffiti\",\n\t\"grouse\": \"grouse\",\n\t\"half\": \"halves\",\n\t\"hero\": \"heroes\",\n\t\"hoof\": \"hooves\",\n\t\"hypothesis\": \"hypotheses\",\n\t\"index\": \"indices\",\n\t\"knife\": \"knives\",\n\t\"larva\": \"larvae\",\n\t\"leaf\": \"leaves\",\n\t\"libretto\": \"libretti\",\n\t\"life\": \"lives\",\n\t\"loaf\": \"loaves\",\n\t\"locus\": \"loci\",\n\t\"louse\": \"lice\",\n\t\"man\": \"men\",\n\t\"matrix\": \"matrices\",\n\t\"means\": \"means\",\n\t\"medium\": \"media\",\n\t\"memorandum\": \"memoranda\",\n\t\"minutia\": \"minutiae\",\n\t\"moose\": \"moose\",\n\t\"mouse\": \"mice\",\n\t\"nebula\": \"nebulae\",\n\t\"neurosis\": \"neuroses\",\n\t\"news\": \"news\",\n\t\"nucleus\": \"nuclei\",\n\t\"oasis\": \"oases\",\n\t\"offspring\": \"offspring\",\n\t\"opus\": \"opera\",\n\t\"ovum\": \"ova\",\n\t\"ox\": \"oxen\",\n\t\"paralysis\": \"paralyses\",\n\t\"parenthesis\": \"parentheses\",\n\t\"phenomenon\": \"phenomena\",\n\t\"phylum\": \"phyla\",\n\t\"potato\": \"potatoes\",\n\t\"prognosis\": \"prognoses\",\n\t\"quiz\": \"quizzes\",\n\t\"radius\": \"radii\",\n\t\"referendum\": \"referenda\",\n\t\"salmon\": \"salmon\",\n\t\"scarf\": \"scarves\",\n\t\"self\": \"selves\",\n\t\"series\": \"series\",\n\t\"sheep\": \"sheep\",\n\t\"shelf\": \"shelves\",\n\t\"shrimp\": \"shrimp\",\n\t\"species\": \"species\",\n\t\"stimulus\": \"stimuli\",\n\t\"stratum\": \"strata\",\n\t\"swine\": \"swine\",\n\t\"syllabus\": \"syllabi\",\n\t\"symposium\": \"symposia\",\n\t\"synopsis\": \"synopses\",\n\t\"synthesis\": \"syntheses\",\n\t\"tableau\": \"tableaus\",\n\t\"that\": \"those\",\n\t\"thesis\": \"theses\",\n\t\"thief\": \"thieves\",\n\t\"tomato\": \"tomatoes\",\n\t\"tooth\": \"teeth\",\n\t\"trout\": \"trout\",\n\t\"tuna\": \"tuna\",\n\t\"vertebra\": \"vertebrae\",\n\t\"vertex\": \"vertices\",\n\t\"veto\": \"vetoes\",\n\t\"vita\": \"vitae\",\n\t\"vortex\": \"vortices\",\n\t\"wharf\": \"wharves\",\n\t\"wife\": \"wives\",\n\t\"wolf\": \"wolves\",\n\t\"woman\": \"women\"\n}\n\n},{}],14:[function(require,module,exports){\n'use strict';\n\nvar insertGroupingRegexp = /(\\d+)(\\d{3})/;\n\nfunction insertGrouping(s, grouping) {\n  var times = Math.floor(s.length / 3);\n  for (var i = 0; i < times; i++) {\n    s = s.replace(insertGroupingRegexp, '$1' + grouping + '$2');\n  }\n  return s;\n}\n\nfunction formatNumber(n, options) {\n  // Set default options\n  options = options || {};\n  options.fractionDigits = typeof options.fractionDigits !== 'undefined' ? options.fractionDigits : 2;\n  options.useGrouping = typeof options.useGrouping !== 'undefined' ? options.useGrouping : true;\n  options.symbols = typeof options.symbols !== 'undefined' ? options.symbols : {\n    // US formats\n    grouping: ',',\n    decimal: '.'\n  };\n\n  var parts = n.toFixed(options.fractionDigits).split('.');\n  var integerPart = parts[0];\n  var decimalPart = parts[1];\n  if (options.useGrouping) {\n    integerPart = insertGrouping(integerPart, options.symbols.grouping);\n  }\n  return integerPart + (options.fractionDigits > 0 ? options.symbols.decimal + decimalPart : '');\n}\n\nmodule.exports = formatNumber;\n\n},{}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = Loader;\n\nvar _tvdml = require('tvdml');\n\nfunction Loader(_ref) {\n\tvar _ref$attrs = _ref.attrs;\n\tvar attrs = _ref$attrs === undefined ? {} : _ref$attrs;\n\tvar title = attrs.title;\n\n\n\treturn (0, _tvdml.jsx)(\n\t\t'document',\n\t\tnull,\n\t\t(0, _tvdml.jsx)(\n\t\t\t'loadingTemplate',\n\t\t\tnull,\n\t\t\t(0, _tvdml.jsx)(\n\t\t\t\t'activityIndicator',\n\t\t\t\tnull,\n\t\t\t\t(0, _tvdml.jsx)(\n\t\t\t\t\t'title',\n\t\t\t\t\tnull,\n\t\t\t\t\ttitle\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t);\n} /** @jsx jsx */\n\n},{\"tvdml\":4}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = Tile;\n\nvar _tvdml = require('tvdml');\n\nvar _utils = require('../utils');\n\n/** @jsx jsx */\n\nfunction Tile(_ref) {\n\tvar _ref$attrs = _ref.attrs;\n\tvar attrs = _ref$attrs === undefined ? {} : _ref$attrs;\n\tvar route = attrs.route;\n\tvar title = attrs.title;\n\tvar poster = attrs.poster;\n\tvar subtitle = attrs.subtitle;\n\tvar _attrs$payload = attrs.payload;\n\tvar payload = _attrs$payload === undefined ? {} : _attrs$payload;\n\tvar autoHighlight = attrs.autoHighlight;\n\n\n\treturn (0, _tvdml.jsx)(\n\t\t'lockup',\n\t\t{\n\t\t\tonSelect: (0, _utils.link)(route, payload),\n\t\t\tautoHighlight: autoHighlight ? 'true' : undefined\n\t\t},\n\t\t(0, _tvdml.jsx)('img', { src: poster, width: '250', height: '250' }),\n\t\t(0, _tvdml.jsx)(\n\t\t\t'title',\n\t\t\t{ style: 'tv-labels-state: marquee-on-highlight' },\n\t\t\ttitle\n\t\t),\n\t\t(0, _tvdml.jsx)(\n\t\t\t'subtitle',\n\t\t\tnull,\n\t\t\tsubtitle\n\t\t)\n\t);\n}\n\n},{\"../utils\":28,\"tvdml\":4}],17:[function(require,module,exports){\n'use strict';\n\nvar _tvdml = require('tvdml');\n\nvar TVDML = _interopRequireWildcard(_tvdml);\n\nvar _token = require('./token');\n\nvar token = _interopRequireWildcard(_token);\n\nvar _loader = require('./components/loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nvar _my = require('./routes/my');\n\nvar _my2 = _interopRequireDefault(_my);\n\nvar _all = require('./routes/all');\n\nvar _all2 = _interopRequireDefault(_all);\n\nvar _auth = require('./routes/auth');\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _season = require('./routes/season');\n\nvar _season2 = _interopRequireDefault(_season);\n\nvar _tvshow = require('./routes/tvshow');\n\nvar _tvshow2 = _interopRequireDefault(_tvshow);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/** @jsx TVDML.jsx */\n\nTVDML.subscribe(TVDML.event.LAUNCH).pipe(function () {\n\tif (token.get()) {\n\t\tTVDML.navigate('main');\n\t} else {\n\t\tTVDML.navigate('auth', {\n\t\t\tonSuccess: function onSuccess(ticket) {\n\t\t\t\ttoken.set(ticket.token, ticket.expires);\n\t\t\t\tTVDML.redirect('home');\n\t\t\t}\n\t\t});\n\t}\n});\n\nTVDML.handleRoute('auth').pipe((0, _auth2.default)());\n\nTVDML.handleRoute('main').pipe(TVDML.render(TVDML.jsx(\n\t'document',\n\tnull,\n\tTVDML.jsx(\n\t\t'menuBarTemplate',\n\t\tnull,\n\t\tTVDML.jsx(\n\t\t\t'menuBar',\n\t\t\tnull,\n\t\t\tTVDML.jsx(\n\t\t\t\t'menuItem',\n\t\t\t\t{ autoHighlight: 'true', route: 'my' },\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'title',\n\t\t\t\t\tnull,\n\t\t\t\t\t'My Series'\n\t\t\t\t)\n\t\t\t),\n\t\t\tTVDML.jsx(\n\t\t\t\t'menuItem',\n\t\t\t\t{ route: 'all' },\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'title',\n\t\t\t\t\tnull,\n\t\t\t\t\t'All Series'\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t)\n)));\n\nTVDML.handleRoute('my').pipe((0, _my2.default)('My Series'));\n\nTVDML.handleRoute('all').pipe((0, _all2.default)('All Series'));\n\nTVDML.handleRoute('search').pipe(TVDML.render(TVDML.jsx(_loader2.default, { title: 'Search' })));\n\nTVDML.handleRoute('tvshow').pipe((0, _tvshow2.default)());\n\nTVDML.handleRoute('season').pipe((0, _season2.default)());\n\n},{\"./components/loader\":15,\"./routes/all\":22,\"./routes/auth\":23,\"./routes/my\":24,\"./routes/season\":25,\"./routes/tvshow\":26,\"./token\":27,\"tvdml\":4}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.parseTVShowPage = parseTVShowPage;\nexports.parseTVShowSeasonPage = parseTVShowSeasonPage;\n\nvar _request = require('./request');\n\nvar parser = new DOMParser();\n\nfunction parseTVShowPage(_ref) {\n\tvar sid = _ref.sid;\n\n\treturn (0, _request.request)('https://soap4.me/soap/' + sid + '/').then(function (_ref2) {\n\t\tvar responseText = _ref2.responseText;\n\n\t\tvar infoRegex = /\"right\">(.+)<\\/div>/g;\n\t\tvar infoResult = [];\n\t\tvar infoMatch = void 0;\n\n\t\tvar recomendationsRegex = /covers\\/soap\\/(\\d+)\\..*title=\"([^\"]+)\"/g;\n\t\tvar recomendationsResult = [];\n\t\tvar recomendationsMatch = void 0;\n\n\t\twhile (infoMatch = infoRegex.exec(responseText)) {\n\t\t\tinfoResult.push(infoMatch[1]);\n\t\t}\n\n\t\twhile (recomendationsMatch = recomendationsRegex.exec(responseText)) {\n\t\t\trecomendationsResult.push({\n\t\t\t\tsid: recomendationsMatch[1],\n\t\t\t\ttitle: recomendationsMatch[2]\n\t\t\t});\n\t\t}\n\n\t\treturn infoResult.map(function (content) {\n\t\t\treturn parser.parseFromString('<div>' + content + '</div>', 'application/xml');\n\t\t}).reduce(function (result, document, i) {\n\t\t\tvar root = document.childNodes.item(0);\n\n\t\t\tswitch (i) {\n\t\t\t\tcase 0:\n\t\t\t\t\tresult.status = root.textContent;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tresult.year = root.textContent;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tresult.duration = root.textContent;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tresult.country = root.textContent;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tresult.genres = Array.apply(null, Array(root.children.length)).map(function (item, i) {\n\t\t\t\t\t\treturn root.children.item(i);\n\t\t\t\t\t}).map(function (node) {\n\t\t\t\t\t\treturn node.textContent;\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tresult.actors = Array.apply(null, Array(root.children.length)).map(function (item, i) {\n\t\t\t\t\t\treturn root.children.item(i);\n\t\t\t\t\t}).map(function (node) {\n\t\t\t\t\t\treturn node.textContent;\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, {\n\t\t\trecomendations: recomendationsResult.filter(filterDuplicates(function (_ref3) {\n\t\t\t\tvar sid = _ref3.sid;\n\t\t\t\treturn sid;\n\t\t\t}))\n\t\t});\n\t});\n}\n\nfunction parseTVShowSeasonPage(_ref4, season) {\n\tvar title = _ref4.title;\n\n\treturn (0, _request.request)('https://soap4.me/soap/' + titleToSlug(title) + '/' + season).then(function (_ref5) {\n\t\tvar responseText = _ref5.responseText;\n\n\t\tvar infoRegex = /<p[^>]*>([^<]+)/g;\n\t\tvar result = [];\n\t\tvar match = void 0;\n\n\t\twhile (match = infoRegex.exec(responseText)) {\n\t\t\tresult.push(match[1]);\n\t\t}\n\n\t\treturn {\n\t\t\tspoilers: result.filter(filterDuplicates())\n\t\t};\n\t});\n}\n\nfunction titleToSlug(title) {\n\treturn title.replace(' ', '_');\n}\n\nfunction filterDuplicates() {\n\tvar traverse = arguments.length <= 0 || arguments[0] === undefined ? function (item) {\n\t\treturn item;\n\t} : arguments[0];\n\n\tvar collection = {};\n\treturn function () {\n\t\tvar key = traverse.apply(undefined, arguments);\n\t\treturn !collection[key] && (collection[key] = true);\n\t};\n}\n\n},{\"./request\":20}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.getDefault = getDefault;\nvar quality = exports.quality = {\n\tSD: 'SD',\n\tHD: '720p',\n\tFULLHD: '720p'\n};\n\nvar qualityPreferences = exports.qualityPreferences = [quality.FULLHD, quality.HD, quality.SD];\n\nfunction getDefault(episode) {\n\treturn qualityPreferences.reduce(function (result, quality) {\n\t\tif (!result && episode[quality]) return episode[quality];\n\t\treturn result;\n\t}, null);\n}\n\n},{}],20:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.invalidateCache = invalidateCache;\nexports.get = get;\nexports.post = post;\nexports.request = request;\n\nvar _tvdml = require('tvdml');\n\nvar cache = {};\nvar timeouts = {};\n\nvar GET = 'GET';\nvar POST = 'POST';\n\nvar REQUEST_TTL = min(10);\n\nvar counter = 0;\n\nfunction invalidateCache(url) {\n\ttimeouts[url] && clearTimeout(timeouts[url]);\n\tdelete cache[url];\n}\n\nfunction get(url) {\n\tvar headers = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n\tif (cache[url]) {\n\t\treturn cache[url];\n\t}\n\n\treturn cache[url] = new _tvdml.Promise(function (resolve) {\n\t\tvar cId = 'get' + getUID();\n\t\trequests[cId] = function (response) {\n\t\t\tdelete requests[cId];\n\t\t\tresolve(response);\n\t\t};\n\t\tnativeGET(cId, url, headers);\n\t}).then(function (response) {\n\t\ttimeouts[url] = setTimeout(function () {\n\t\t\treturn invalidateCache(url);\n\t\t}, REQUEST_TTL);\n\t\treturn response;\n\t}).catch(function (error) {\n\t\tinvalidateCache(url);\n\t\treturn _tvdml.Promise.reject(error);\n\t});\n}\n\nfunction post(url) {\n\tvar parameters = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\tvar headers = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\treturn new _tvdml.Promise(function (resolve) {\n\t\tvar cId = 'post' + getUID();\n\t\trequests[cId] = function (response) {\n\t\t\tdelete requests[cId];\n\t\t\tresolve(response);\n\t\t};\n\t\tnativePOST(cId, url, parameters, headers);\n\t});\n}\n\nfunction request(url) {\n\tvar params = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\tvar _params$data = params.data;\n\tvar data = _params$data === undefined ? {} : _params$data;\n\tvar _params$method = params.method;\n\tvar method = _params$method === undefined ? GET : _params$method;\n\tvar _params$prepare = params.prepare;\n\tvar prepare = _params$prepare === undefined ? function (payload) {\n\t\treturn payload;\n\t} : _params$prepare;\n\tvar progress = params.progress;\n\n\n\treturn _tvdml.Promise.resolve(new XMLHttpRequest()).then(function (XHR) {\n\t\tXHR.open(method, url);\n\n\t\tif (method === POST) {\n\t\t\tXHR.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n\t\t}\n\n\t\treturn XHR;\n\t}).then(prepare).then(function (XHR) {\n\t\treturn new _tvdml.Promise(function (resolve, reject) {\n\t\t\tXHR.addEventListener('load', result(resolve));\n\t\t\tXHR.addEventListener('error', result(reject));\n\t\t\tXHR.addEventListener('abort', result(reject));\n\t\t\tXHR.addEventListener('timeout', result(reject));\n\n\t\t\tif (typeof progress === 'function') {\n\t\t\t\tXHR.addEventListener('progress', function (event) {\n\t\t\t\t\tif (event.lengthComputable) {\n\t\t\t\t\t\tprogress(event.loaded / event.total);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tXHR.send(JSON.stringify(data));\n\t\t});\n\t}).then(function (xhr) {\n\t\tvar status = xhr.status;\n\n\n\t\tif (status >= 200 && status < 300 || status === 304) {\n\t\t\treturn xhr;\n\t\t}\n\t\treturn _tvdml.Promise.reject(xhr);\n\t});\n}\n\nfunction result(handler) {\n\treturn function (_ref) {\n\t\tvar target = _ref.target;\n\t\treturn handler(target);\n\t};\n}\n\nfunction min(amount) {\n\treturn amount * 60 * 1000;\n}\n\nfunction getUID() {\n\treturn ++counter;\n}\n\n},{\"tvdml\":4}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.get = get;\nexports.post = post;\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _token = require('../token');\n\nvar token = _interopRequireWildcard(_token);\n\nvar _request = require('../request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar headers = {\n\t'User-Agent': 'xbmc for soap'\n};\n\nfunction get(url) {\n\treturn request.get(url, (0, _objectAssign2.default)({ 'X-Api-Token': token.get() }, headers));\n}\n\nfunction post(url, parameters) {\n\treturn request.post(url, parameters, (0, _objectAssign2.default)({ 'X-Api-Token': token.get() }, headers));\n}\n\n},{\"../request\":20,\"../token\":27,\"object-assign\":11}],22:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (title) {\n\treturn TVDML.createPipeline().pipe(TVDML.render(TVDML.jsx(_loader2.default, null))).pipe(TVDML.passthrough(function () {\n\t\treturn (0, _soap.get)('https://soap4.me/api/soap/').then(function (series) {\n\t\t\treturn { series: series };\n\t\t});\n\t})).pipe(TVDML.render(function (_ref) {\n\t\tvar series = _ref.series;\n\n\t\treturn TVDML.jsx(\n\t\t\t'document',\n\t\t\tnull,\n\t\t\tTVDML.jsx(\n\t\t\t\t'stackTemplate',\n\t\t\t\tnull,\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'banner',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'title',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\ttitle\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'collectionList',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'grid',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'section',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tseries.map(function (tvshow) {\n\t\t\t\t\t\t\t\tvar title = tvshow.title;\n\t\t\t\t\t\t\t\tvar sid = tvshow.sid;\n\t\t\t\t\t\t\t\tvar unwatched = tvshow.unwatched;\n\n\t\t\t\t\t\t\t\tvar poster = 'http://covers.soap4.me/soap/big/' + sid + '.jpg';\n\n\t\t\t\t\t\t\t\treturn TVDML.jsx(_tile2.default, {\n\t\t\t\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\t\t\t\tposter: poster,\n\t\t\t\t\t\t\t\t\troute: 'tvshow',\n\t\t\t\t\t\t\t\t\tpayload: { tvshow: tvshow },\n\t\t\t\t\t\t\t\t\tsubtitle: unwatched && unwatched + ' ' + (0, _plur2.default)('episode', unwatched)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}));\n};\n\nvar _plur = require('plur');\n\nvar _plur2 = _interopRequireDefault(_plur);\n\nvar _tvdml = require('tvdml');\n\nvar TVDML = _interopRequireWildcard(_tvdml);\n\nvar _soap = require('../request/soap');\n\nvar _tile = require('../components/tile');\n\nvar _tile2 = _interopRequireDefault(_tile);\n\nvar _loader = require('../components/loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"../components/loader\":15,\"../components/tile\":16,\"../request/soap\":21,\"plur\":12,\"tvdml\":4}],23:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function () {\n\treturn TVDML.createPipeline().pipe(function (payload) {\n\t\tvar _ref = payload.navigation || {};\n\n\t\tvar onSuccess = _ref.onSuccess;\n\t\tvar error = _ref.error;\n\t\tvar route = payload.route;\n\n\n\t\tvar loginDocument = void 0;\n\t\tvar passwordDocument = void 0;\n\n\t\tgatherInfo('Enter login', false, function (login) {\n\t\t\tTVDML.render(TVDML.jsx('document', null)).pipe(gatherInfo('Enter password', true, function (password) {\n\t\t\t\tTVDML.render(TVDML.jsx(_loader2.default, { title: 'Authorizing...' })).pipe(function () {\n\t\t\t\t\tnavigationDocument.removeDocument(loginDocument);\n\t\t\t\t\tnavigationDocument.removeDocument(passwordDocument);\n\n\t\t\t\t\t(0, _soap.post)('https://soap4.me/login/', { login: login, password: password }).then(function (response) {\n\t\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\t\tonSuccess({\n\t\t\t\t\t\t\t\ttoken: response.token,\n\t\t\t\t\t\t\t\texpires: response.till\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tTVDML.redirect(route, {\n\t\t\t\t\t\t\t\terror: 'Incorrect login or password',\n\t\t\t\t\t\t\t\tonSuccess: onSuccess\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t\tconsole.error(error);\n\n\t\t\t\t\t\tTVDML.redirect(route, {\n\t\t\t\t\t\t\terror: 'Something went wrong =(',\n\t\t\t\t\t\t\tonSuccess: onSuccess\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}).sink({ route: route });\n\t\t\t})).pipe(function (_ref2) {\n\t\t\t\tvar document = _ref2.document;\n\t\t\t\treturn passwordDocument = document;\n\t\t\t}).sink({ route: route });\n\t\t}).pipe(function (_ref3) {\n\t\t\tvar document = _ref3.document;\n\t\t\treturn loginDocument = document;\n\t\t}).pipe(function () {\n\t\t\tif (error) {\n\t\t\t\tTVDML.renderModal(TVDML.jsx(\n\t\t\t\t\t'document',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'alertTemplate',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\terror\n\t\t\t\t\t\t),\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'button',\n\t\t\t\t\t\t\t{ onSelect: TVDML.removeModal },\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t'Ok'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)).sink({ route: route });\n\t\t\t}\n\t\t}).sink({ route: route });\n\t});\n};\n\nvar _tvdml = require('tvdml');\n\nvar TVDML = _interopRequireWildcard(_tvdml);\n\nvar _soap = require('../request/soap');\n\nvar _utils = require('../utils');\n\nvar _loader = require('../components/loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction gatherInfo(description, secure, callback) {\n\tvar _getStartParams = (0, _utils.getStartParams)();\n\n\tvar BASEURL = _getStartParams.BASEURL;\n\n\n\treturn TVDML.render(TVDML.jsx(\n\t\t'document',\n\t\tnull,\n\t\tTVDML.jsx(\n\t\t\t'formTemplate',\n\t\t\tnull,\n\t\t\tTVDML.jsx(\n\t\t\t\t'banner',\n\t\t\t\tnull,\n\t\t\t\tTVDML.jsx('img', { src: BASEURL + '/assets/logo.png', width: '218', height: '218' }),\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'description',\n\t\t\t\t\tnull,\n\t\t\t\t\tdescription\n\t\t\t\t)\n\t\t\t),\n\t\t\tTVDML.jsx('textField', { secure: secure }),\n\t\t\tTVDML.jsx(\n\t\t\t\t'footer',\n\t\t\t\tnull,\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'button',\n\t\t\t\t\t{ onSelect: onSubmit(callback) },\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t'Submit'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t));\n} /** @jsx TVDML.jsx */\n\nfunction onSubmit(resolve) {\n\treturn function (event) {\n\t\tvar document = event.target.ownerDocument;\n\t\tvar input = document.getElementsByTagName('textField').item(0);\n\n\t\tresolve(input.getFeature('Keyboard').text);\n\t};\n}\n\n},{\"../components/loader\":15,\"../request/soap\":21,\"../utils\":28,\"tvdml\":4}],24:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (title) {\n\treturn TVDML.createPipeline().pipe(TVDML.render(TVDML.jsx(_loader2.default, null))).pipe(TVDML.passthrough(function () {\n\t\treturn (0, _soap.get)('https://soap4.me/api/soap/my/').then(function (series) {\n\t\t\treturn { series: series };\n\t\t});\n\t})).pipe(TVDML.render(function (_ref) {\n\t\tvar series = _ref.series;\n\n\t\tvar watching = series.filter(function (_ref2) {\n\t\t\tvar watching = _ref2.watching;\n\t\t\treturn watching > 0;\n\t\t});\n\t\tvar others = series.filter(function (_ref3) {\n\t\t\tvar watching = _ref3.watching;\n\t\t\treturn watching < 1;\n\t\t});\n\n\t\tvar ongoing = watching.filter(function (_ref4) {\n\t\t\tvar status = _ref4.status;\n\t\t\tvar unwatched = _ref4.unwatched;\n\t\t\treturn status == 0 || unwatched > 0;\n\t\t});\n\t\tvar unwatched = ongoing.filter(function (_ref5) {\n\t\t\tvar unwatched = _ref5.unwatched;\n\t\t\treturn unwatched > 0;\n\t\t});\n\t\tvar watched = ongoing.filter(function (_ref6) {\n\t\t\tvar unwatched = _ref6.unwatched;\n\t\t\treturn !unwatched;\n\t\t});\n\t\tvar closed = watching.filter(function (_ref7) {\n\t\t\tvar status = _ref7.status;\n\t\t\tvar unwatched = _ref7.unwatched;\n\t\t\treturn status > 0 && !unwatched;\n\t\t});\n\n\t\treturn TVDML.jsx(\n\t\t\t'document',\n\t\t\tnull,\n\t\t\tTVDML.jsx(\n\t\t\t\t'stackTemplate',\n\t\t\t\tnull,\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'banner',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'title',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\ttitle\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'collectionList',\n\t\t\t\t\tnull,\n\t\t\t\t\trenderSectionGrid(unwatched, 'New episodes'),\n\t\t\t\t\trenderSectionGrid(watched, 'Watched'),\n\t\t\t\t\trenderSectionGrid(closed, 'Closed')\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}));\n};\n\nvar _plur = require('plur');\n\nvar _plur2 = _interopRequireDefault(_plur);\n\nvar _tvdml = require('tvdml');\n\nvar TVDML = _interopRequireWildcard(_tvdml);\n\nvar _soap = require('../request/soap');\n\nvar _tile = require('../components/tile');\n\nvar _tile2 = _interopRequireDefault(_tile);\n\nvar _loader = require('../components/loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/** @jsx TVDML.jsx */\n\nfunction renderSectionGrid(collection, title) {\n\tvar header = void 0;\n\n\tif (title) {\n\t\theader = TVDML.jsx(\n\t\t\t'header',\n\t\t\tnull,\n\t\t\tTVDML.jsx(\n\t\t\t\t'title',\n\t\t\t\tnull,\n\t\t\t\ttitle\n\t\t\t)\n\t\t);\n\t}\n\n\treturn TVDML.jsx(\n\t\t'grid',\n\t\tnull,\n\t\theader,\n\t\tTVDML.jsx(\n\t\t\t'section',\n\t\t\tnull,\n\t\t\tcollection.map(function (tvshow) {\n\t\t\t\tvar title = tvshow.title;\n\t\t\t\tvar sid = tvshow.sid;\n\t\t\t\tvar unwatched = tvshow.unwatched;\n\n\t\t\t\tvar poster = 'http://covers.soap4.me/soap/big/' + sid + '.jpg';\n\n\t\t\t\treturn TVDML.jsx(_tile2.default, {\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tposter: poster,\n\t\t\t\t\troute: 'tvshow',\n\t\t\t\t\tpayload: { tvshow: tvshow },\n\t\t\t\t\tsubtitle: unwatched && unwatched + ' ' + (0, _plur2.default)('episode', unwatched)\n\t\t\t\t});\n\t\t\t})\n\t\t)\n\t);\n}\n\n},{\"../components/loader\":15,\"../components/tile\":16,\"../request/soap\":21,\"plur\":12,\"tvdml\":4}],25:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function () {\n\treturn TVDML.createPipeline().pipe(TVDML.passthrough(function (_ref) {\n\t\tvar _ref$navigation = _ref.navigation;\n\t\tvar tvshow = _ref$navigation.tvshow;\n\t\tvar season = _ref$navigation.season;\n\t\treturn { tvshow: tvshow, season: season };\n\t})).pipe(TVDML.render(function (_ref2) {\n\t\tvar season = _ref2.season.season;\n\n\t\treturn TVDML.jsx(_loader2.default, { title: 'Season ' + season });\n\t})).pipe(TVDML.passthrough(function (_ref3) {\n\t\tvar tvshow = _ref3.tvshow;\n\t\tvar season = _ref3.season.season;\n\n\t\treturn (0, _info.parseTVShowSeasonPage)(tvshow, season).then(function (_ref4) {\n\t\t\tvar spoilers = _ref4.spoilers;\n\t\t\treturn { spoilers: spoilers };\n\t\t});\n\t})).pipe(TVDML.render(function (_ref5) {\n\t\tvar tvshow = _ref5.tvshow;\n\t\tvar season = _ref5.season;\n\t\tvar spoilers = _ref5.spoilers;\n\t\tvar sid = tvshow.sid;\n\t\tvar title = tvshow.title;\n\t\tvar description = tvshow.description;\n\t\tvar id = season.id;\n\n\n\t\tvar poster = 'http://covers.soap4.me/season/big/' + id + '.jpg';\n\t\tvar episodes = season.episodes.filter(Boolean).map(_quality.getDefault);\n\n\t\tconsole.log('season', tvshow, season, spoilers);\n\n\t\treturn TVDML.jsx(\n\t\t\t'document',\n\t\t\tnull,\n\t\t\tTVDML.jsx(\n\t\t\t\t'compilationTemplate',\n\t\t\t\t{ theme: 'light' },\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'background',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx('heroImg', { src: poster })\n\t\t\t\t),\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'list',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'header',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t),\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'subtitle',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'Season ',\n\t\t\t\t\t\t\tseason.season\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'section',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tepisodes.map(function (episode, i) {\n\t\t\t\t\t\t\tvar title_en = episode.title_en;\n\t\t\t\t\t\t\tvar spoiler = episode.spoiler;\n\t\t\t\t\t\t\tvar watched = episode.watched;\n\t\t\t\t\t\t\tvar quality = episode.quality;\n\t\t\t\t\t\t\tvar episodeIndex = episode.episode;\n\n\n\t\t\t\t\t\t\tvar title = (0, _utils.fixSpecialSymbols)(title_en);\n\t\t\t\t\t\t\tvar description = (0, _utils.fixSpecialSymbols)(spoilers[i]);\n\n\t\t\t\t\t\t\treturn TVDML.jsx(\n\t\t\t\t\t\t\t\t'listItemLockup',\n\t\t\t\t\t\t\t\t{ onSelect: playEpisode(episode) },\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'ordinal',\n\t\t\t\t\t\t\t\t\t{ minLength: '2' },\n\t\t\t\t\t\t\t\t\tepisodeIndex\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\t\t{ style: 'tv-labels-state: marquee-on-highlight' },\n\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'decorationLabel',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\twatched && TVDML.jsx('badge', { src: 'resource://button-checkmark' }),\n\t\t\t\t\t\t\t\t\t'  ',\n\t\t\t\t\t\t\t\t\t!!~[FULLHD, HD].indexOf(quality) && TVDML.jsx('badge', { src: 'resource://hd' })\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'relatedContent',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t\t'itemBanner',\n\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\tTVDML.jsx('heroImg', { src: poster }),\n\t\t\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t\t\t'description',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tmoreLabel: 'more',\n\t\t\t\t\t\t\t\t\t\t\t\tallowsZooming: 'true',\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'margin: 20 0 0',\n\t\t\t\t\t\t\t\t\t\t\t\tonSelect: showDescription({ title: title, description: description })\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t\t\t'row',\n\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\twatched ? TVDML.jsx(\n\t\t\t\t\t\t\t\t\t\t\t\t'buttonLockup',\n\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\tTVDML.jsx('badge', { src: 'resource://button-remove' }),\n\t\t\t\t\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'Mark as New'\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) : TVDML.jsx(\n\t\t\t\t\t\t\t\t\t\t\t\t'buttonLockup',\n\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\tTVDML.jsx('badge', { src: 'resource://button-add' }),\n\t\t\t\t\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\t\t'Mark as Watched'\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}));\n};\n\nvar _plur = require('plur');\n\nvar _plur2 = _interopRequireDefault(_plur);\n\nvar _tvdml = require('tvdml');\n\nvar TVDML = _interopRequireWildcard(_tvdml);\n\nvar _info = require('../info');\n\nvar _quality = require('../quality');\n\nvar _utils = require('../utils');\n\nvar _loader = require('../components/loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/** @jsx TVDML.jsx */\n\nvar SD = _quality.quality.SD;\nvar HD = _quality.quality.HD;\nvar FULLHD = _quality.quality.FULLHD;\n\n\nfunction playEpisode(episode) {\n\treturn function (event) {\n\t\tconsole.log('playEpisode', episode);\n\n\t\tvar videoURL = 'http://www.rwdevcon.com/videos/Ray-Wenderlich-Teamwork.mp4';\n\n\t\tvar player = new Player();\n\t\tvar playlist = new Playlist();\n\t\tvar mediaItem = new MediaItem('video', videoURL);\n\n\t\tplayer.playlist = playlist;\n\t\tplayer.playlist.push(mediaItem);\n\t\tplayer.present();\n\t};\n}\n\nfunction showDescription(_ref6) {\n\tvar title = _ref6.title;\n\tvar description = _ref6.description;\n\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\n\t\tTVDML.renderModal(TVDML.jsx(\n\t\t\t'document',\n\t\t\tnull,\n\t\t\tTVDML.jsx(\n\t\t\t\t'descriptiveAlertTemplate',\n\t\t\t\tnull,\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'title',\n\t\t\t\t\tnull,\n\t\t\t\t\ttitle\n\t\t\t\t),\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'description',\n\t\t\t\t\tnull,\n\t\t\t\t\tdescription\n\t\t\t\t)\n\t\t\t)\n\t\t)).sink();\n\t};\n}\n\n},{\"../components/loader\":15,\"../info\":18,\"../quality\":19,\"../utils\":28,\"plur\":12,\"tvdml\":4}],26:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }(); /** @jsx TVDML.jsx */\n\nexports.default = function () {\n\treturn TVDML.createPipeline().pipe(TVDML.passthrough(function (_ref) {\n\t\tvar tvshow = _ref.navigation.tvshow;\n\t\treturn { tvshow: tvshow };\n\t})).pipe(TVDML.render(function (_ref2) {\n\t\tvar title = _ref2.tvshow.title;\n\n\t\treturn TVDML.jsx(_loader2.default, { title: title });\n\t})).pipe(TVDML.passthrough(function (_ref3) {\n\t\tvar sid = _ref3.tvshow.sid;\n\n\t\treturn Promise.all([(0, _soap.get)('https://soap4.me/api/soap/'), (0, _soap.get)('https://soap4.me/api/episodes/' + sid + '/')]).then(function (_ref4) {\n\t\t\tvar _ref5 = _slicedToArray(_ref4, 2);\n\n\t\t\tvar series = _ref5[0];\n\t\t\tvar episodes = _ref5[1];\n\t\t\treturn { series: series, episodes: episodes };\n\t\t});\n\t})).pipe(TVDML.passthrough(function (_ref6) {\n\t\tvar tvshow = _ref6.tvshow;\n\n\t\treturn (0, _info.parseTVShowPage)(tvshow).then(function (extra) {\n\t\t\treturn { extra: extra };\n\t\t});\n\t})).pipe(TVDML.render(function (_ref7) {\n\t\tvar tvshow = _ref7.tvshow;\n\t\tvar episodes = _ref7.episodes;\n\t\tvar extra = _ref7.extra;\n\t\tvar series = _ref7.series;\n\t\tvar sid = tvshow.sid;\n\t\tvar year = tvshow.year;\n\t\tvar title = tvshow.title;\n\t\tvar watching = tvshow.watching;\n\t\tvar imdb_votes = tvshow.imdb_votes;\n\t\tvar imdb_rating = tvshow.imdb_rating;\n\t\tvar description = tvshow.description;\n\t\tvar kinopoisk_votes = tvshow.kinopoisk_votes;\n\t\tvar kinopoisk_rating = tvshow.kinopoisk_rating;\n\t\tvar genres = extra.genres;\n\t\tvar status = extra.status;\n\t\tvar actors = extra.actors;\n\t\tvar country = extra.country;\n\t\tvar duration = extra.duration;\n\t\tvar recomendations = extra.recomendations;\n\n\n\t\tvar isWatching = watching > 0;\n\t\tvar poster = 'http://covers.soap4.me/soap/big/' + sid + '.jpg';\n\n\t\tvar seasons = episodes.reduce(function (result, item) {\n\t\t\tvar seasonIndex = item.season - 1;\n\t\t\tvar episodeIndex = item.episode;\n\n\t\t\tif (!result[seasonIndex]) {\n\t\t\t\tresult[seasonIndex] = {\n\t\t\t\t\tid: item.season_id,\n\t\t\t\t\tseason: item.season,\n\t\t\t\t\tepisodes: [],\n\t\t\t\t\tsubtitles: []\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar episodeCollection = result[seasonIndex].episodes;\n\n\t\t\tif (~item.translate.toLowerCase().indexOf('—Å—É–±—Ç–∏—Ç—Ä—ã')) {\n\t\t\t\tepisodeCollection = result[seasonIndex].subtitles;\n\t\t\t}\n\n\t\t\tif (!episodeCollection[episodeIndex]) {\n\t\t\t\tepisodeCollection[episodeIndex] = {};\n\t\t\t}\n\t\t\tepisodeCollection[episodeIndex][item.quality] = item;\n\t\t\treturn result;\n\t\t}, []);\n\n\t\tconsole.log('tvshow', tvshow, episodes, seasons, extra, series);\n\n\t\treturn TVDML.jsx(\n\t\t\t'document',\n\t\t\tnull,\n\t\t\tTVDML.jsx(\n\t\t\t\t'productTemplate',\n\t\t\t\t{ theme: 'light' },\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'banner',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'infoList',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'info',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'header',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t'Status'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t(0, _utils.capitalizeText)(status)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'info',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'header',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t'Genres'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tgenres.map(_utils.capitalizeText).map(function (genre) {\n\t\t\t\t\t\t\t\treturn TVDML.jsx(\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tgenre\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t),\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'info',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'header',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t'Actors'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tactors.map(function (actor) {\n\t\t\t\t\t\t\t\treturn TVDML.jsx(\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tactor\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'stack',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t),\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'row',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tduration\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tyear\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'description',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tallowsZooming: 'true',\n\t\t\t\t\t\t\t\tmoreLabel: 'more',\n\t\t\t\t\t\t\t\tonSelect: showFullDescription(tvshow)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t),\n\t\t\t\t\t\tisWatching ? TVDML.jsx(\n\t\t\t\t\t\t\t'row',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'buttonLockup',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tTVDML.jsx('badge', { src: 'resource://button-play' }),\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t'Continue Watching'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'buttonLockup',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tTVDML.jsx('badge', { src: 'resource://button-remove' }),\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t'Stop Watching'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) : TVDML.jsx(\n\t\t\t\t\t\t\t'row',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'buttonLockup',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tTVDML.jsx('badge', { src: 'resource://button-add' }),\n\t\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t'Watch'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tTVDML.jsx('heroImg', { src: poster })\n\t\t\t\t),\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'shelf',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'header',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'Seasons'\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'section',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tseasons.map(function (season) {\n\t\t\t\t\t\t\tvar id = season.id;\n\t\t\t\t\t\t\tvar episodes = season.episodes;\n\n\t\t\t\t\t\t\tvar poster = 'http://covers.soap4.me/season/big/' + id + '.jpg';\n\t\t\t\t\t\t\tvar unwatched = episodes.reduce(function (result, episode) {\n\t\t\t\t\t\t\t\treturn result + +!(0, _quality.getDefault)(episode).watched;\n\t\t\t\t\t\t\t}, 0);\n\n\t\t\t\t\t\t\treturn TVDML.jsx(_tile2.default, {\n\t\t\t\t\t\t\t\troute: 'season',\n\t\t\t\t\t\t\t\tposter: poster,\n\t\t\t\t\t\t\t\tpayload: { tvshow: tvshow, season: season },\n\t\t\t\t\t\t\t\ttitle: 'Season ' + season.season,\n\t\t\t\t\t\t\t\tsubtitle: unwatched && unwatched + ' ' + (0, _plur2.default)('episode', unwatched)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'shelf',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'header',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'Viewers Also Watched'\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'section',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\trecomendations.map(function (recomendation) {\n\t\t\t\t\t\t\tvar sid = recomendation.sid;\n\n\t\t\t\t\t\t\tvar poster = 'http://covers.soap4.me/soap/big/' + sid + '.jpg';\n\t\t\t\t\t\t\tvar tvshow = void 0;\n\n\t\t\t\t\t\t\tseries.some(function (item) {\n\t\t\t\t\t\t\t\tif (item.sid === sid) {\n\t\t\t\t\t\t\t\t\ttvshow = item;\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (!tvshow) return null;\n\n\t\t\t\t\t\t\tvar _tvshow = tvshow;\n\t\t\t\t\t\t\tvar title = _tvshow.title;\n\n\n\t\t\t\t\t\t\treturn TVDML.jsx(_tile2.default, {\n\t\t\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\t\t\tposter: poster,\n\t\t\t\t\t\t\t\troute: 'tvshow',\n\t\t\t\t\t\t\t\tpayload: { tvshow: tvshow }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'shelf',\n\t\t\t\t\tnull,\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'header',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'Ratings'\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t'section',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t!!+imdb_rating && TVDML.jsx(\n\t\t\t\t\t\t\t'ratingCard',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t('' + imdb_rating).slice(0, 3),\n\t\t\t\t\t\t\t\t' / 10'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tTVDML.jsx('ratingBadge', { value: imdb_rating / 10 }),\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'description',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t'Average of ',\n\t\t\t\t\t\t\t\t(0, _simpleFormatNumber2.default)(+imdb_votes, { fractionDigits: 0 }),\n\t\t\t\t\t\t\t\t' IMDB user ratings.'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\t!!+kinopoisk_rating && TVDML.jsx(\n\t\t\t\t\t\t\t'ratingCard',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'title',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t('' + kinopoisk_rating).slice(0, 3),\n\t\t\t\t\t\t\t\t' / 10'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tTVDML.jsx('ratingBadge', { value: kinopoisk_rating / 10 }),\n\t\t\t\t\t\t\tTVDML.jsx(\n\t\t\t\t\t\t\t\t'description',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t'Average of ',\n\t\t\t\t\t\t\t\t(0, _simpleFormatNumber2.default)(+kinopoisk_votes, { fractionDigits: 0 }),\n\t\t\t\t\t\t\t\t' Kinopoisk user ratings.'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}));\n};\n\nvar _plur = require('plur');\n\nvar _plur2 = _interopRequireDefault(_plur);\n\nvar _tvdml = require('tvdml');\n\nvar TVDML = _interopRequireWildcard(_tvdml);\n\nvar _simpleFormatNumber = require('simple-format-number');\n\nvar _simpleFormatNumber2 = _interopRequireDefault(_simpleFormatNumber);\n\nvar _soap = require('../request/soap');\n\nvar _quality = require('../quality');\n\nvar _utils = require('../utils');\n\nvar _info = require('../info');\n\nvar _tile = require('../components/tile');\n\nvar _tile2 = _interopRequireDefault(_tile);\n\nvar _loader = require('../components/loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Promise = TVDML.Promise;\n\n\nfunction showFullDescription(_ref8) {\n\tvar title = _ref8.title;\n\tvar description = _ref8.description;\n\n\treturn function (event) {\n\t\tTVDML.renderModal(TVDML.jsx(\n\t\t\t'document',\n\t\t\tnull,\n\t\t\tTVDML.jsx(\n\t\t\t\t'descriptiveAlertTemplate',\n\t\t\t\tnull,\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'title',\n\t\t\t\t\tnull,\n\t\t\t\t\ttitle\n\t\t\t\t),\n\t\t\t\tTVDML.jsx(\n\t\t\t\t\t'description',\n\t\t\t\t\tnull,\n\t\t\t\t\tdescription\n\t\t\t\t)\n\t\t\t)\n\t\t)).sink();\n\t};\n}\n\n},{\"../components/loader\":15,\"../components/tile\":16,\"../info\":18,\"../quality\":19,\"../request/soap\":21,\"../utils\":28,\"plur\":12,\"simple-format-number\":14,\"tvdml\":4}],27:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.set = set;\nexports.get = get;\nexports.remove = remove;\nvar TOKEN = 'soap4me-token';\nvar EXPIRES = 'soap4me-token-expires';\n\nfunction set(token, expires) {\n\tlocalStorage.setItem(TOKEN, token);\n\tlocalStorage.setItem(EXPIRES, (expires + '000').slice(0, 13));\n}\n\nfunction get() {\n\tvar token = localStorage.getItem(TOKEN);\n\tvar expires = localStorage.getItem(EXPIRES);\n\n\tif (Date.now() < expires) {\n\t\treturn token;\n\t}\n\n\tremove();\n\treturn null;\n}\n\nfunction remove() {\n\tlocalStorage.removeItem(TOKEN);\n\tlocalStorage.removeItem(EXPIRES);\n}\n\n},{}],28:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.log = log;\nexports.link = link;\nexports.getStartParams = getStartParams;\nexports.noop = noop;\nexports.fixSpecialSymbols = fixSpecialSymbols;\nexports.capitalize = capitalize;\nexports.capitalizeText = capitalizeText;\n\nvar _tvdml = require('tvdml');\n\nvar _request = require('./request');\n\nvar parser = new DOMParser();\n\nfunction log() {\n\tvar message = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n\treturn function (payload) {\n\t\tconsole.log(message, payload);\n\t\treturn payload;\n\t};\n}\n\nfunction link(route, params) {\n\treturn function (event) {\n\t\treturn (0, _tvdml.navigate)(route, params);\n\t};\n}\n\nfunction getStartParams() {\n\treturn JSON.parse(sessionStorage.getItem('startParams') || '{}');\n}\n\nfunction noop() {\n\treturn function () {};\n}\n\nfunction fixSpecialSymbols() {\n\tvar text = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n\treturn text.replace(/&#039;/g, '\\'');\n}\n\nfunction capitalize(word) {\n\tword = '' + word;\n\treturn word.charAt(0).toUpperCase() + word.slice(1);\n}\n\nfunction capitalizeText(text) {\n\treturn ('' + text).split(' ').map(capitalize).join(' ');\n}\n\n},{\"./request\":20,\"tvdml\":4}]},{},[17])\n\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.2.1\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n    function lib$es6$promise$then$$then(onFulfillment, onRejection) {\n      var parent = this;\n\n      var child = new this.constructor(lib$es6$promise$$internal$$noop);\n\n      if (child[lib$es6$promise$$internal$$PROMISE_ID] === undefined) {\n        lib$es6$promise$$internal$$makePromise(child);\n      }\n\n      var state = parent._state;\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$es6$promise$asap$$asap(function(){\n          lib$es6$promise$$internal$$invokeCallback(state, child, callback, parent._result);\n        });\n      } else {\n        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    }\n    var lib$es6$promise$then$$default = lib$es6$promise$then$$then;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n    var lib$es6$promise$$internal$$PROMISE_ID = Math.random().toString(36).substring(16);\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n      if (maybeThenable.constructor === promise.constructor &&\n          then === lib$es6$promise$then$$default &&\n          constructor.resolve === lib$es6$promise$promise$resolve$$default) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value, lib$es6$promise$$internal$$getThen(value));\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    var lib$es6$promise$$internal$$id = 0;\n    function lib$es6$promise$$internal$$nextId() {\n      return lib$es6$promise$$internal$$id++;\n    }\n\n    function lib$es6$promise$$internal$$makePromise(promise) {\n      promise[lib$es6$promise$$internal$$PROMISE_ID] = lib$es6$promise$$internal$$id++;\n      promise._state = undefined;\n      promise._result = undefined;\n      promise._subscribers = [];\n    }\n\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        return new Constructor(function(resolve, reject) {\n          reject(new TypeError('You must pass an array to race.'));\n        });\n      } else {\n        return new Constructor(function(resolve, reject) {\n          var length = entries.length;\n          for (var i = 0; i < length; i++) {\n            Constructor.resolve(entries[i]).then(resolve, reject);\n          }\n        });\n      }\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this[lib$es6$promise$$internal$$PROMISE_ID] = lib$es6$promise$$internal$$nextId();\n      this._result = this._state = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        typeof resolver !== 'function' && lib$es6$promise$promise$$needsResolver();\n        this instanceof lib$es6$promise$promise$$Promise ? lib$es6$promise$$internal$$initializePromise(this, resolver) : lib$es6$promise$promise$$needsNew();\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: lib$es6$promise$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!this.promise[lib$es6$promise$$internal$$PROMISE_ID]) {\n        lib$es6$promise$$internal$$makePromise(this.promise);\n      }\n\n      if (lib$es6$promise$utils$$isArray(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._result = new Array(this.length);\n\n        if (this.length === 0) {\n          lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(this.promise, lib$es6$promise$enumerator$$validationError());\n      }\n    }\n\n    function lib$es6$promise$enumerator$$validationError() {\n      return new Error('Array Methods must be provided an Array');\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var input   = this._input;\n\n      for (var i = 0; this._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      var resolve = c.resolve;\n\n      if (resolve === lib$es6$promise$promise$resolve$$default) {\n        var then = lib$es6$promise$$internal$$getThen(entry);\n\n        if (then === lib$es6$promise$then$$default &&\n            entry._state !== lib$es6$promise$$internal$$PENDING) {\n          this._settledAt(entry._state, i, entry._result);\n        } else if (typeof then !== 'function') {\n          this._remaining--;\n          this._result[i] = entry;\n        } else if (c === lib$es6$promise$promise$$default) {\n          var promise = new c(lib$es6$promise$$internal$$noop);\n          lib$es6$promise$$internal$$handleMaybeThenable(promise, entry, then);\n          this._willSettleAt(promise, i);\n        } else {\n          this._willSettleAt(new c(function(resolve) { resolve(entry); }), i);\n        }\n      } else {\n        this._willSettleAt(resolve(entry), i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        this._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = value;\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n","'use strict';\n/* eslint-disable no-unused-vars */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (e) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","import {createPassThroughPipeline} from './pipeline';\nimport {Promise} from 'es6-promise';\n\nconst subscriptions = {};\n\nexport function subscribe(name) {\n\tif (!subscriptions[name]) {\n\t\tsubscriptions[name] = [];\n\t}\n\n\tlet pipeline = createPassThroughPipeline({\n\t\textend: {\n\t\t\tunsubscribe() {\n\t\t\t\tlet index = subscriptions[name].indexOf(pipeline);\n\n\t\t\t\tif (~index) {\n\t\t\t\t\tsubscriptions[name].splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tsubscriptions[name].push(pipeline);\n\n\treturn pipeline;\n}\n\nexport function broadcast(name, data) {\n\t(subscriptions[name] || []).forEach(pipeline => pipeline.sink(data));\n}\n","export * from './render';\nexport * from './pipeline';\nexport * from './navigation';\nexport {Promise} from 'es6-promise';\nexport {default as jsx} from './jsx';\nexport {subscribe} from './event-bus';\n","export default function createElement(tag, attrs, ...children) {\n\tconst node = {tag};\n\n\tif (attrs) {\n\t\tObject\n\t\t\t.keys(attrs)\n\t\t\t.forEach(name => {\n\t\t\t\tif (typeof(attrs[name]) === 'function') {\n\t\t\t\t\tnode.events || (node.events = {});\n\t\t\t\t\tnode.events[name] = attrs[name];\n\t\t\t\t} else {\n\t\t\t\t\tnode.attrs || (node.attrs = {});\n\t\t\t\t\tnode.attrs[name] = attrs[name];\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tif (children.length === 1) {\n\t\tnode.children = children[0];\n\t} else if (children.length > 1) {\n\t\tnode.children = children;\n\t}\n\n\treturn node;\n}\n","/** @jsx jsx */\n\nimport {passthrough, createPassThroughPipeline} from './pipeline';\nimport {broadcast, subscribe} from './event-bus';\nimport {Promise} from 'es6-promise';\nimport {render} from './render';\nimport {Symbol} from './utils';\nimport jsx from './jsx';\n\nlet launched = false;\n\nconst routes = {};\n\nexport const event = {\n\tEXIT: new Symbol('onExit'),\n\tERROR: new Symbol('onError'),\n\tLAUNCH: new Symbol('onLaunch'),\n\tRELOAD: new Symbol('onReload'),\n\tRESUME: new Symbol('onResume'),\n\tSUSPEND: new Symbol('onSuspend'),\n};\n\nexport const route = {\n\tNOT_FOUND: new Symbol('Not found'),\n};\n\nexport function handleRoute(routeName) {\n\tif (!routeName) {\n\t\tthrow new Error('Route handler need route to process');\n\t}\n\n\tif (routes[routeName]) {\n\t\tthrow new Error(`Handler for \"${routeName}\" is already specified`);\n\t}\n\n\treturn routes[routeName] = createPassThroughPipeline({\n\t\tonSinkStep(step, payload) {\n\t\t\tlet current = getActiveDocument();\n\n\t\t\tif (step && current && current.route !== routeName) {\n\t\t\t\tthrow `Processing route \"${routeName}\" isn't active. Terminating pipeline...`;\n\t\t\t}\n\t\t\treturn payload;\n\t\t}\n\t})\n\t.pipe(render(<document />));\n}\n\nexport function navigate(routeName, params, redirect = false) {\n\tif (!launched) {\n\t\tthrow new Error(`Can't process navigation before app is launched`);\n\t}\n\n\tlet targetRoute = routes[routeName];\n\n\tif (targetRoute) {\n\t\treturn targetRoute.sink({\n\t\t\troute: routeName,\n\t\t\tnavigation: params,\n\t\t\tredirect,\n\t\t});\n\t}\n\n\tconsole.error(`Unable to resolve route \"${routeName}\"`);\n\n\tif (routeName !== route.NOT_FOUND) {\n\t\treturn navigate(route.NOT_FOUND, params);\n\t}\n}\n\nexport function redirect(routeName, params) {\n\treturn navigate(routeName, params, true);\n}\n\nObject\n\t.keys(event)\n\t.forEach(id => {\n\t\tlet symbol = event[id];\n\t\tlet name = symbol.toString();\n\n\t\tApp[name] = options => {\n\t\t\tconsole.info('Fired handler for app lifecycle', name, options);\n\n\t\t\tif (name === 'onLaunch') {\n\t\t\t\tsessionStorage.setItem('startParams', JSON.stringify(options));\n\t\t\t\tlaunched = true;\n\t\t\t}\n\t\t\tbroadcast(symbol);\n\t\t}\n\t});\n\nsubscribe('menu-item-select').pipe(({menuItem, menuBar}) => {\n\tlet route = menuItem.getAttribute('route');\n\n\tif (route) {\n\t\tnavigate(route, {menuItem, menuBar});\n\t}\n});\n","import assign from 'object-assign';\nimport {Promise} from 'es6-promise';\nimport {noop} from './utils';\n\nexport function createPipeline(options = {}) {\n\tconst {\n\t\tchain = [],\n\t\tpassthrough,\n\t} = this || {};\n\n\tconst pipeline = (...args) => (payload) => {\n\t\treturn chain\n\t\t\t.reduce((target, handler, i) => {\n\t\t\t\treturn target\n\t\t\t\t\t.then((options.onSinkStep || onSinkStep).bind(null, i))\n\t\t\t\t\t.then(handler);\n\t\t\t}, Promise.resolve(assign({}, payload, {args})))\n\t\t\t.catch(error => console.error(error));\n\t};\n\n\treturn assign(pipeline, options.extend, {\n\t\tpipe(handler) {\n\t\t\tif (typeof(handler.pipe) === 'function') {\n\t\t\t\thandler = handler();\n\t\t\t}\n\n\t\t\tif (passthrough) {\n\t\t\t\tchain.push(handler);\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\treturn createPipeline.call({chain: chain.concat(handler)}, options);\n\t\t},\n\n\t\tsink(payload) {\n\t\t\treturn pipeline()(payload);\n\t\t},\n\t});\n}\n\nexport function createPassThroughPipeline(options) {\n\treturn createPipeline.call({passthrough: true}, options);\n}\n\nexport function passthrough(handler = noop()) {\n\treturn payload => {\n\t\treturn Promise\n\t\t\t.resolve(handler(payload))\n\t\t\t.then(extra => {\n\t\t\t\tif (extra == null || typeof(extra) !== 'object') return payload;\n\t\t\t\treturn assign({}, payload, extra);\n\t\t\t});\n\t};\n}\n\nfunction onSinkStep(step, payload) {\n\treturn payload;\n}\n","import assign from 'object-assign';\nimport {Promise} from 'es6-promise';\nimport {broadcast} from './event-bus';\nimport {promisedTimeout} from './utils';\nimport {passthrough, createPipeline} from './pipeline';\n\nlet hasModal = false;\nlet documentSwitching = Promise.resolve();\n\nconst RENDERING_ANIMATION = 500;\n\nconst parser = new DOMParser();\n\nconst eventMapper = {\n\t'onSelect': 'select',\n};\n\nexport function render(template) {\n\treturn createPipeline()\n\t\t.pipe(parseDocument(template))\n\t\t.pipe(passthrough(payload => {\n\t\t\tlet {\n\t\t\t\troute,\n\t\t\t\tnavigation = {},\n\t\t\t\tparsedDocument: document,\n\t\t\t\tdocument: renderedDocument,\n\t\t\t} = payload;\n\n\t\t\tlet {menuBar, menuItem} = navigation;\n\n\t\t\tdocument.route = route;\n\n\t\t\tif (hasModal) removeModal();\n\n\t\t\tif (menuBar && menuItem) {\n\t\t\t\tmenuBar.setDocument(document, menuItem);\n\t\t\t} else if (renderedDocument) {\n\t\t\t\tnavigationDocument.replaceDocument(document, renderedDocument);\n\t\t\t} else {\n\t\t\t\tnavigationDocument.pushDocument(document);\n\t\t\t}\n\n\t\t\treturn {document};\n\t\t}))\n\t\t.pipe(passthrough(() => promisedTimeout(RENDERING_ANIMATION)))\n\t\t.pipe(passthrough(({redirect}) => {\n\t\t\tif (redirect) {\n\t\t\t\tlet {documents} = navigationDocument;\n\t\t\t\tlet document = documents[documents.length - 2];\n\n\t\t\t\tdocument && navigationDocument.removeDocument(document);\n\t\t\t}\n\n\t\t\treturn {redirect: false};\n\t\t}));\n}\n\nexport function renderModal(template) {\n\treturn createPipeline()\n\t\t.pipe(passthrough(() => {\n\t\t\tif (!hasModal) return;\n\t\t\tremoveModal();\n\t\t\treturn promisedTimeout(RENDERING_ANIMATION);\n\t\t}))\n\t\t.pipe(parseDocument(template))\n\t\t.pipe(passthrough(({parsedDocument: document, route}) => {\n\t\t\thasModal = true;\n\t\t\tdocument.route = route;\n\t\t\tnavigationDocument.presentModal(document);\n\t\t}));\n}\n\nexport function parseDocument(template) {\n\treturn createPipeline().pipe(payload => assign({}, payload, {\n\t\tparsedDocument: createDocument(template, payload)\n\t}));\n}\n\nexport function removeModal() {\n\thasModal = false;\n\tnavigationDocument.dismissModal();\n}\n\nfunction createDocument(template, payload) {\n\tif (typeof(template) === 'function') {\n\t\ttemplate = template(payload);\n\t}\n\n\tif (template == null) {\n\t\treturn createEmptyDocument();\n\t}\n\n\tif (typeof(template) === 'string') {\n\t\treturn stringToDocument(template);\n\t}\n\n\tif (typeof(template) === 'object') {\n\t\treturn uvdomToDocument(template);\n\t}\n\n\treturn null;\n}\n\nfunction uvdomToDocument(uvdom, document = createEmptyDocument()) {\n\t[]\n\t\t.concat(uvdom || [])\n\t\t.forEach((node) => {\n\t\t\tlet element;\n\n\t\t\tif (node == null) return;\n\n\t\t\tif (typeof(node) === 'string') {\n\t\t\t\telement = document.ownerDocument.createTextNode(node);\n\t\t\t} else {\n\t\t\t\tif (typeof(node.tag) === 'function') {\n\t\t\t\t\tnode = node.tag(node);\n\t\t\t\t}\n\n\t\t\t\tconst {\n\t\t\t\t\ttag,\n\t\t\t\t\tattrs = {},\n\t\t\t\t\tevents = {},\n\t\t\t\t} = node;\n\n\t\t\t\telement = document.ownerDocument.createElement(tag);\n\n\t\t\t\tconst children = []\n\t\t\t\t\t.concat(node.children || [])\n\t\t\t\t\t.reduce((collection, child) => collection.concat(child), [])\n\t\t\t\t\t.map((child) => {\n\t\t\t\t\t\tif (typeof(child) === 'number') {\n\t\t\t\t\t\t\treturn child.toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn child;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((child) => {\n\t\t\t\t\t\treturn typeof(child) === 'string' || (child && child.tag);\n\t\t\t\t\t});\n\n\t\t\t\tObject\n\t\t\t\t\t.keys(attrs)\n\t\t\t\t\t.forEach(name => {\n\t\t\t\t\t\tif (typeof(attrs[name]) !== 'undefined') {\n\t\t\t\t\t\t\telement.setAttribute(name, attrs[name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tif (tag === 'menuBar') {\n\t\t\t\t\tlet feature = element.getFeature('MenuBarDocument');\n\n\t\t\t\t\telement.addEventListener('select', ({target}) => {\n\t\t\t\t\t\tbroadcast('menu-item-select', {\n\t\t\t\t\t\t\tmenuItem: target,\n\t\t\t\t\t\t\tmenuBar: feature,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tObject\n\t\t\t\t\t.keys(events)\n\t\t\t\t\t.forEach(name => {\n\t\t\t\t\t\tlet eventName = eventMapper[name] || name;\n\t\t\t\t\t\telement.addEventListener(eventName, events[name]);\n\t\t\t\t\t});\n\n\t\t\t\tuvdomToDocument(children, element);\n\t\t\t}\n\n\t\t\telement != null && document.appendChild(element);\n\t\t});\n\n\treturn document;\n}\n\nfunction stringToDocument(string) {\n\treturn parser.parseFromString(string, 'application/xml');\n}\n\nfunction createEmptyDocument() {\n\tconst document = DOMImplementationRegistry\n\t\t.getDOMImplementation()\n\t\t.createDocument();\n\n\tfor (let i = 0, length = document.childNodes.length; i < length; i++) {\n\t\tdocument.removeChild(document.childNodes.item(i));\n\t}\n\n\treturn document;\n}\n","import {Promise} from 'es6-promise';\n\nexport function noop() {\n\treturn () => {};\n}\n\nexport function promisedTimeout(timeout) {\n\treturn new Promise(resolve => setTimeout(resolve, timeout));\n}\n\nexport class Symbol {\n\tconstructor(name) {\n\t\tthis.name = name;\n\t}\n\n\ttoString() {\n\t\treturn this.name;\n\t}\n}\n","// shim for using process in browser\n\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\n(function () {\n  try {\n    cachedSetTimeout = setTimeout;\n  } catch (e) {\n    cachedSetTimeout = function () {\n      throw new Error('setTimeout is not defined');\n    }\n  }\n  try {\n    cachedClearTimeout = clearTimeout;\n  } catch (e) {\n    cachedClearTimeout = function () {\n      throw new Error('clearTimeout is not defined');\n    }\n  }\n} ())\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = cachedSetTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    cachedClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        cachedSetTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\nvar irregularPlurals = require('irregular-plurals');\n\nmodule.exports = function (str, plural, count) {\n\tif (typeof plural === 'number') {\n\t\tcount = plural;\n\t}\n\n\tif (str in irregularPlurals) {\n\t\tplural = irregularPlurals[str];\n\t} else if (typeof plural !== 'string') {\n\t\tplural = (str.replace(/(?:s|x|z|ch|sh)$/i, '$&e').replace(/([^aeiou])y$/i, '$1ie') + 's')\n\t\t\t.replace(/i?e?s$/i, function (m) {\n\t\t\t\tvar isTailLowerCase = str.slice(-1) === str.slice(-1).toLowerCase();\n\t\t\t\treturn isTailLowerCase ? m.toLowerCase() : m.toUpperCase();\n\t\t\t});\n\t}\n\n\treturn count === 1 ? str : plural;\n};\n","module.exports={\n\t\"addendum\": \"addenda\",\n\t\"aircraft\": \"aircraft\",\n\t\"alga\": \"algae\",\n\t\"alumna\": \"alumnae\",\n\t\"alumnus\": \"alumni\",\n\t\"amoeba\": \"amoebae\",\n\t\"analysis\": \"analyses\",\n\t\"antenna\": \"antennae\",\n\t\"antithesis\": \"antitheses\",\n\t\"apex\": \"apices\",\n\t\"appendix\": \"appendices\",\n\t\"axis\": \"axes\",\n\t\"bacillus\": \"bacilli\",\n\t\"bacterium\": \"bacteria\",\n\t\"barracks\": \"barracks\",\n\t\"basis\": \"bases\",\n\t\"beau\": \"beaux\",\n\t\"bison\": \"bison\",\n\t\"bureau\": \"bureaus\",\n\t\"cactus\": \"cacti\",\n\t\"calf\": \"calves\",\n\t\"child\": \"children\",\n\t\"ch√¢teau\": \"ch√¢teaus\",\n\t\"cherub\": \"cherubim\",\n\t\"codex\": \"codices\",\n\t\"concerto\": \"concerti\",\n\t\"corpus\": \"corpora\",\n\t\"crisis\": \"crises\",\n\t\"criterion\": \"criteria\",\n\t\"curriculum\": \"curricula\",\n\t\"datum\": \"data\",\n\t\"deer\": \"deer\",\n\t\"diagnosis\": \"diagnoses\",\n\t\"die\": \"dice\",\n\t\"dwarf\": \"dwarfs\",\n\t\"echo\": \"echoes\",\n\t\"elf\": \"elves\",\n\t\"elk\": \"elk\",\n\t\"ellipsis\": \"ellipses\",\n\t\"embargo\": \"embargoes\",\n\t\"emphasis\": \"emphases\",\n\t\"erratum\": \"errata\",\n\t\"faux pas\": \"faux pas\",\n\t\"fez\": \"fezes\",\n\t\"firmware\": \"firmware\",\n\t\"fish\": \"fish\",\n\t\"focus\": \"foci\",\n\t\"foot\": \"feet\",\n\t\"formula\": \"formulae\",\n\t\"fungus\": \"fungi\",\n\t\"gallows\": \"gallows\",\n\t\"genus\": \"genera\",\n\t\"goose\": \"geese\",\n\t\"graffito\": \"graffiti\",\n\t\"grouse\": \"grouse\",\n\t\"half\": \"halves\",\n\t\"hero\": \"heroes\",\n\t\"hoof\": \"hooves\",\n\t\"hypothesis\": \"hypotheses\",\n\t\"index\": \"indices\",\n\t\"knife\": \"knives\",\n\t\"larva\": \"larvae\",\n\t\"leaf\": \"leaves\",\n\t\"libretto\": \"libretti\",\n\t\"life\": \"lives\",\n\t\"loaf\": \"loaves\",\n\t\"locus\": \"loci\",\n\t\"louse\": \"lice\",\n\t\"man\": \"men\",\n\t\"matrix\": \"matrices\",\n\t\"means\": \"means\",\n\t\"medium\": \"media\",\n\t\"memorandum\": \"memoranda\",\n\t\"minutia\": \"minutiae\",\n\t\"moose\": \"moose\",\n\t\"mouse\": \"mice\",\n\t\"nebula\": \"nebulae\",\n\t\"neurosis\": \"neuroses\",\n\t\"news\": \"news\",\n\t\"nucleus\": \"nuclei\",\n\t\"oasis\": \"oases\",\n\t\"offspring\": \"offspring\",\n\t\"opus\": \"opera\",\n\t\"ovum\": \"ova\",\n\t\"ox\": \"oxen\",\n\t\"paralysis\": \"paralyses\",\n\t\"parenthesis\": \"parentheses\",\n\t\"phenomenon\": \"phenomena\",\n\t\"phylum\": \"phyla\",\n\t\"potato\": \"potatoes\",\n\t\"prognosis\": \"prognoses\",\n\t\"quiz\": \"quizzes\",\n\t\"radius\": \"radii\",\n\t\"referendum\": \"referenda\",\n\t\"salmon\": \"salmon\",\n\t\"scarf\": \"scarves\",\n\t\"self\": \"selves\",\n\t\"series\": \"series\",\n\t\"sheep\": \"sheep\",\n\t\"shelf\": \"shelves\",\n\t\"shrimp\": \"shrimp\",\n\t\"species\": \"species\",\n\t\"stimulus\": \"stimuli\",\n\t\"stratum\": \"strata\",\n\t\"swine\": \"swine\",\n\t\"syllabus\": \"syllabi\",\n\t\"symposium\": \"symposia\",\n\t\"synopsis\": \"synopses\",\n\t\"synthesis\": \"syntheses\",\n\t\"tableau\": \"tableaus\",\n\t\"that\": \"those\",\n\t\"thesis\": \"theses\",\n\t\"thief\": \"thieves\",\n\t\"tomato\": \"tomatoes\",\n\t\"tooth\": \"teeth\",\n\t\"trout\": \"trout\",\n\t\"tuna\": \"tuna\",\n\t\"vertebra\": \"vertebrae\",\n\t\"vertex\": \"vertices\",\n\t\"veto\": \"vetoes\",\n\t\"vita\": \"vitae\",\n\t\"vortex\": \"vortices\",\n\t\"wharf\": \"wharves\",\n\t\"wife\": \"wives\",\n\t\"wolf\": \"wolves\",\n\t\"woman\": \"women\"\n}\n","var insertGroupingRegexp = /(\\d+)(\\d{3})/;\n\nfunction insertGrouping(s, grouping) {\n  var times = Math.floor(s.length / 3);\n  for (var i = 0; i < times; i++) {\n    s = s.replace(insertGroupingRegexp, '$1' + grouping + '$2');\n  }\n  return s;\n}\n\nfunction formatNumber(n, options) {\n  // Set default options\n  options = options || {};\n  options.fractionDigits = typeof options.fractionDigits !== 'undefined' ? options.fractionDigits : 2;\n  options.useGrouping = typeof options.useGrouping !== 'undefined' ? options.useGrouping : true;\n  options.symbols = typeof options.symbols !== 'undefined' ? options.symbols : {\n    // US formats\n    grouping: ',',\n    decimal: '.'\n  };\n\n  var parts = n.toFixed(options.fractionDigits).split('.');\n  var integerPart = parts[0];\n  var decimalPart = parts[1];\n  if (options.useGrouping) {\n    integerPart = insertGrouping(integerPart, options.symbols.grouping);\n  }\n  return integerPart + (options.fractionDigits > 0 ? options.symbols.decimal + decimalPart : '');\n}\n\nmodule.exports = formatNumber;\n","/** @jsx jsx */\n\nimport {jsx} from 'tvdml';\n\nexport default function Loader({attrs = {}}) {\n\tlet {title} = attrs;\n\n\treturn (\n\t\t<document>\n\t\t\t<loadingTemplate>\n\t\t\t\t<activityIndicator>\n\t\t\t\t\t<title>{title}</title>\n\t\t\t\t</activityIndicator>\n\t\t\t</loadingTemplate>\n\t\t</document>\n\t);\n}\n","/** @jsx jsx */\n\nimport {jsx} from 'tvdml';\nimport {link} from '../utils';\n\nexport default function Tile({attrs = {}}) {\n\tlet {\n\t\troute,\n\t\ttitle,\n\t\tposter,\n\t\tsubtitle,\n\t\tpayload = {},\n\t\tautoHighlight\n\t} = attrs;\n\n\treturn (\n\t\t<lockup\n\t\t\tonSelect={link(route, payload)}\n\t\t\tautoHighlight={autoHighlight ? 'true' : undefined}\n\t\t>\n\t\t\t<img src={poster} width=\"250\" height=\"250\" />\n\t\t\t<title style=\"tv-labels-state: marquee-on-highlight\">{title}</title>\n\t\t\t<subtitle>{subtitle}</subtitle>\n\t\t</lockup>\n\t);\n}\n","/** @jsx TVDML.jsx */\n\nimport * as TVDML from 'tvdml';\nimport * as token from './token';\n\nimport Loader from './components/loader';\n\nimport MyRoute from './routes/my';\nimport AllRoute from './routes/all';\nimport AuthRoute from './routes/auth';\nimport SeasonRoute from './routes/season';\nimport TVShowRoute from './routes/tvshow';\n\nTVDML\n\t.subscribe(TVDML.event.LAUNCH)\n\t.pipe(() => {\n\t\tif (token.get()) {\n\t\t\tTVDML.navigate('main');\n\t\t} else {\n\t\t\tTVDML.navigate('auth', {\n\t\t\t\tonSuccess(ticket) {\n\t\t\t\t\ttoken.set(ticket.token, ticket.expires);\n\t\t\t\t\tTVDML.redirect('home');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\nTVDML\n\t.handleRoute('auth')\n\t.pipe(AuthRoute());\n\nTVDML\n\t.handleRoute('main')\n\t.pipe(TVDML.render(\n\t\t<document>\n\t\t\t<menuBarTemplate>\n\t\t\t\t<menuBar>\n\t\t\t\t\t<menuItem autoHighlight=\"true\" route=\"my\">\n\t\t\t\t\t\t<title>My Series</title>\n\t\t\t\t\t</menuItem>\n\t\t\t\t\t<menuItem route=\"all\">\n\t\t\t\t\t\t<title>All Series</title>\n\t\t\t\t\t</menuItem>\n\t\t\t\t</menuBar>\n\t\t\t</menuBarTemplate>\n\t\t</document>\n\t));\n\nTVDML\n\t.handleRoute('my')\n\t.pipe(MyRoute('My Series'));\n\nTVDML\n\t.handleRoute('all')\n\t.pipe(AllRoute('All Series'));\n\nTVDML\n\t.handleRoute('search')\n\t.pipe(TVDML.render(<Loader title=\"Search\" />));\n\nTVDML\n\t.handleRoute('tvshow')\n\t.pipe(TVShowRoute());\n\nTVDML\n\t.handleRoute('season')\n\t.pipe(SeasonRoute());\n","import {request} from './request';\n\nconst parser = new DOMParser();\n\nexport function parseTVShowPage({sid}) {\n\treturn request(`https://soap4.me/soap/${sid}/`).then(({responseText}) => {\n\t\tlet infoRegex = /\"right\">(.+)<\\/div>/g;\n\t\tlet infoResult = [];\n\t\tlet infoMatch;\n\n\t\tlet recomendationsRegex = /covers\\/soap\\/(\\d+)\\..*title=\"([^\"]+)\"/g;\n\t\tlet recomendationsResult = [];\n\t\tlet recomendationsMatch;\n\n\t\twhile(infoMatch = infoRegex.exec(responseText)) {\n\t\t\tinfoResult.push(infoMatch[1]);\n\t\t}\n\n\t\twhile(recomendationsMatch = recomendationsRegex.exec(responseText)) {\n\t\t\trecomendationsResult.push({\n\t\t\t\tsid: recomendationsMatch[1],\n\t\t\t\ttitle: recomendationsMatch[2],\n\t\t\t});\n\t\t}\n\n\t\treturn infoResult\n\t\t\t.map(content => parser.parseFromString(`<div>${content}</div>`, 'application/xml'))\n\t\t\t.reduce((result, document, i) => {\n\t\t\t\tlet root = document.childNodes.item(0);\n\n\t\t\t\tswitch(i) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tresult.status = root.textContent;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tresult.year = root.textContent;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tresult.duration = root.textContent;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tresult.country = root.textContent;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tresult.genres = Array\n\t\t\t\t\t\t\t.apply(null, Array(root.children.length))\n\t\t\t\t\t\t\t.map((item, i) => root.children.item(i))\n\t\t\t\t\t\t\t.map(node => node.textContent);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tresult.actors = Array\n\t\t\t\t\t\t\t.apply(null, Array(root.children.length))\n\t\t\t\t\t\t\t.map((item, i) => root.children.item(i))\n\t\t\t\t\t\t\t.map(node => node.textContent);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, {\n\t\t\t\trecomendations: recomendationsResult.filter(filterDuplicates(({sid}) => sid)),\n\t\t\t});\n\t});\n}\n\nexport function parseTVShowSeasonPage({title}, season) {\n\treturn request(`https://soap4.me/soap/${titleToSlug(title)}/${season}`).then(({responseText}) => {\n\t\tlet infoRegex = /<p[^>]*>([^<]+)/g;\n\t\tlet result = [];\n\t\tlet match;\n\n\t\twhile(match = infoRegex.exec(responseText)) {\n\t\t\tresult.push(match[1]);\n\t\t}\n\n\t\treturn {\n\t\t\tspoilers: result.filter(filterDuplicates()),\n\t\t};\n\t});\n}\n\nfunction titleToSlug(title) {\n\treturn title.replace(' ', '_');\n}\n\nfunction filterDuplicates(traverse = item => item) {\n\tlet collection = {};\n\treturn (...args) => {\n\t\tlet key = traverse(...args);\n\t\treturn !collection[key] && (collection[key] = true);\n\t};\n}\n","export const quality = {\n\tSD: 'SD',\n\tHD: '720p',\n\tFULLHD: '720p',\n};\n\nexport const qualityPreferences = [\n\tquality.FULLHD,\n\tquality.HD,\n\tquality.SD,\n];\n\nexport function getDefault(episode) {\n\treturn qualityPreferences.reduce((result, quality) => {\n\t\tif (!result && episode[quality]) return episode[quality];\n\t\treturn result;\n\t}, null);\n}\n","import {Promise} from 'tvdml';\n\nconst cache = {};\nconst timeouts = {};\n\nconst GET = 'GET';\nconst POST = 'POST';\n\nconst REQUEST_TTL = min(10);\n\nlet counter = 0;\n\nexport function invalidateCache(url) {\n\ttimeouts[url] && clearTimeout(timeouts[url]);\n\tdelete cache[url];\n}\n\nexport function get(url, headers = {}) {\n\tif (cache[url]) {\n\t\treturn cache[url];\n\t}\n\n\treturn cache[url] = new Promise((resolve) => {\n\t\tconst cId = `get${getUID()}`;\n\t\trequests[cId] = response => {\n\t\t\tdelete requests[cId];\n\t\t\tresolve(response);\n\t\t}\n\t\tnativeGET(cId, url, headers);\n\t})\n\t.then(response => {\n\t\ttimeouts[url] = setTimeout(() => invalidateCache(url), REQUEST_TTL);\n\t\treturn response;\n\t})\n\t.catch((error) => {\n\t\tinvalidateCache(url);\n\t\treturn Promise.reject(error);\n\t});\n}\n\nexport function post(url, parameters = {}, headers = {}) {\n\treturn new Promise((resolve) => {\n\t\tconst cId = `post${getUID()}`;\n\t\trequests[cId] = response => {\n\t\t\tdelete requests[cId];\n\t\t\tresolve(response);\n\t\t}\n\t\tnativePOST(cId, url, parameters, headers);\n\t});\n}\n\nexport function request(url, params = {}) {\n\tconst {\n\t\tdata = {},\n\t\tmethod = GET,\n\t\tprepare = payload => payload,\n\t\tprogress,\n\t} = params;\n\n\treturn Promise\n\t\t.resolve(new XMLHttpRequest())\n\t\t.then(XHR => {\n\t\t\tXHR.open(method, url);\n\n\t\t\tif (method === POST) {\n\t\t\t\tXHR.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n\t\t\t}\n\n\t\t\treturn XHR;\n\t\t})\n\t\t.then(prepare)\n\t\t.then(XHR => new Promise((resolve, reject) => {\n\t\t\tXHR.addEventListener('load', result(resolve));\n\t\t\tXHR.addEventListener('error', result(reject));\n\t\t\tXHR.addEventListener('abort', result(reject));\n\t\t\tXHR.addEventListener('timeout', result(reject));\n\n\t\t\tif (typeof(progress) === 'function') {\n\t\t\t\tXHR.addEventListener('progress', (event) => {\n\t\t\t\t\tif (event.lengthComputable) {\n\t\t\t\t\t\tprogress(event.loaded / event.total);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tXHR.send(JSON.stringify(data));\n\t\t}))\n\t\t.then((xhr) => {\n\t\t\tconst {status} = xhr;\n\n\t\t\tif (status >= 200 && status < 300 || status === 304) {\n\t\t\t\treturn xhr;\n\t\t\t}\n\t\t\treturn Promise.reject(xhr);\n\t\t});\n}\n\nfunction result(handler) {\n\treturn ({target}) => handler(target);\n}\n\nfunction min(amount) {\n\treturn amount * 60 * 1000;\n}\n\nfunction getUID() {\n\treturn ++counter;\n}\n","import assign from 'object-assign';\n\nimport * as token from '../token';\nimport * as request from '../request';\n\nconst headers = {\n\t'User-Agent': 'xbmc for soap',\n};\n\nexport function get(url) {\n\treturn request.get(url, assign({'X-Api-Token': token.get()}, headers));\n}\n\nexport function post(url, parameters) {\n\treturn request.post(url, parameters, assign({'X-Api-Token': token.get()}, headers));\n}\n","/** @jsx TVDML.jsx */\n\nimport plur from 'plur';\nimport * as TVDML from 'tvdml';\nimport {get} from '../request/soap';\n\nimport Tile from '../components/tile';\nimport Loader from '../components/loader';\n\nexport default function(title) {\n\treturn TVDML\n\t\t.createPipeline()\n\t\t.pipe(TVDML.render(<Loader />))\n\t\t.pipe(TVDML.passthrough(() => {\n\t\t\treturn get('https://soap4.me/api/soap/').then(series => ({series}));\n\t\t}))\n\t\t.pipe(TVDML.render(({series}) => {\n\t\t\treturn (\n\t\t\t\t<document>\n\t\t\t\t\t<stackTemplate>\n\t\t\t\t\t\t<banner>\n\t\t\t\t\t\t\t<title>{title}</title>\n\t\t\t\t\t\t</banner>\n\t\t\t\t\t\t<collectionList>\n\t\t\t\t\t\t\t<grid>\n\t\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t\t{series.map(tvshow => {\n\t\t\t\t\t\t\t\t\t\tlet {title, sid, unwatched} = tvshow;\n\t\t\t\t\t\t\t\t\t\tlet poster = `http://covers.soap4.me/soap/big/${sid}.jpg`;\n\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Tile\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\t\t\t\t\t\t\tposter={poster}\n\t\t\t\t\t\t\t\t\t\t\t\troute=\"tvshow\"\n\t\t\t\t\t\t\t\t\t\t\t\tpayload={{tvshow}}\n\t\t\t\t\t\t\t\t\t\t\t\tsubtitle={unwatched && `${unwatched} ${plur('episode', unwatched)}`}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t</grid>\n\t\t\t\t\t\t</collectionList>\n\t\t\t\t\t</stackTemplate>\n\t\t\t\t</document>\n\t\t\t);\n\t\t}));\n}\n","/** @jsx TVDML.jsx */\n\nimport * as TVDML from 'tvdml';\nimport {post} from '../request/soap';\nimport {getStartParams} from '../utils';\n\nimport Loader from '../components/loader';\n\nexport default function() {\n\treturn TVDML\n\t\t.createPipeline()\n\t\t.pipe((payload) => {\n\t\t\tlet {onSuccess, error} = payload.navigation || {};\n\t\t\tlet {route} = payload;\n\n\t\t\tlet loginDocument;\n\t\t\tlet passwordDocument;\n\n\t\t\tgatherInfo('Enter login', false, (login) => {\n\t\t\t\tTVDML\n\t\t\t\t\t.render(<document />)\n\t\t\t\t\t.pipe(gatherInfo('Enter password', true, (password) => {\n\t\t\t\t\t\tTVDML\n\t\t\t\t\t\t\t.render(<Loader title=\"Authorizing...\" />)\n\t\t\t\t\t\t\t.pipe(() => {\n\t\t\t\t\t\t\t\tnavigationDocument.removeDocument(loginDocument);\n\t\t\t\t\t\t\t\tnavigationDocument.removeDocument(passwordDocument);\n\n\t\t\t\t\t\t\t\tpost('https://soap4.me/login/', {login, password})\n\t\t\t\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\t\t\t\t\t\tonSuccess({\n\t\t\t\t\t\t\t\t\t\t\t\ttoken: response.token,\n\t\t\t\t\t\t\t\t\t\t\t\texpires: response.till,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tTVDML.redirect(route, {\n\t\t\t\t\t\t\t\t\t\t\t\terror: 'Incorrect login or password',\n\t\t\t\t\t\t\t\t\t\t\t\tonSuccess,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\t\t\t\t\tconsole.error(error);\n\n\t\t\t\t\t\t\t\t\t\tTVDML.redirect(route, {\n\t\t\t\t\t\t\t\t\t\t\terror: 'Something went wrong =(',\n\t\t\t\t\t\t\t\t\t\t\tonSuccess,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.sink({route});\n\t\t\t\t\t}))\n\t\t\t\t\t.pipe(({document}) => passwordDocument = document)\n\t\t\t\t\t.sink({route});\n\t\t\t})\n\t\t\t.pipe(({document}) => loginDocument = document)\n\t\t\t.pipe(() => {\n\t\t\t\tif (error) {\n\t\t\t\t\tTVDML.renderModal(\n\t\t\t\t\t\t<document>\n\t\t\t\t\t\t\t<alertTemplate>\n\t\t\t\t\t\t\t\t<title>{error}</title>\n\t\t\t\t\t\t\t\t<button onSelect={TVDML.removeModal}>\n\t\t\t\t\t\t\t\t\t<text>Ok</text>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</alertTemplate>\n\t\t\t\t\t\t</document>\n\t\t\t\t\t)\n\t\t\t\t\t.sink({route});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.sink({route})\n\t\t});\n}\n\nfunction gatherInfo(description, secure, callback) {\n\tconst {BASEURL} = getStartParams();\n\n\treturn TVDML.render(\n\t\t<document>\n\t\t\t<formTemplate>\n\t\t\t\t<banner>\n\t\t\t\t\t<img src={`${BASEURL}/assets/logo.png`} width=\"218\" height=\"218\"/>\n\t\t\t\t\t<description>\n\t\t\t\t\t\t{description}\n\t\t\t\t\t</description>\n\t\t\t\t</banner>\n\t\t\t\t<textField secure={secure} />\n\t\t\t\t<footer>\n\t\t\t\t\t<button onSelect={onSubmit(callback)}>\n\t\t\t\t\t\t<text>Submit</text>\n\t\t\t\t\t</button>\n\t\t\t\t</footer>\n\t\t\t</formTemplate>\n\t\t</document>\n\t);\n}\n\nfunction onSubmit(resolve) {\n\treturn (event) => {\n\t\tlet document = event.target.ownerDocument;\n\t\tlet input = document.getElementsByTagName('textField').item(0);\n\n\t\tresolve(input.getFeature('Keyboard').text);\n\t}\n}\n","/** @jsx TVDML.jsx */\n\nimport plur from 'plur';\nimport * as TVDML from 'tvdml';\nimport {get} from '../request/soap';\n\nimport Tile from '../components/tile';\nimport Loader from '../components/loader';\n\nexport default function(title) {\n\treturn TVDML\n\t\t.createPipeline()\n\t\t.pipe(TVDML.render(<Loader />))\n\t\t.pipe(TVDML.passthrough(() => {\n\t\t\treturn get('https://soap4.me/api/soap/my/').then(series => ({series}));\n\t\t}))\n\t\t.pipe(TVDML.render(({series}) => {\n\t\t\tlet watching = series.filter(({watching}) => watching > 0);\n\t\t\tlet others = series.filter(({watching}) => watching < 1);\n\n\t\t\tlet ongoing = watching.filter(({status, unwatched}) => status == 0 || unwatched > 0);\n\t\t\tlet unwatched = ongoing.filter(({unwatched}) => unwatched > 0);\n\t\t\tlet watched = ongoing.filter(({unwatched}) => !unwatched);\n\t\t\tlet closed = watching.filter(({status, unwatched}) => status > 0 && !unwatched);\n\n\t\t\treturn (\n\t\t\t\t<document>\n\t\t\t\t\t<stackTemplate>\n\t\t\t\t\t\t<banner>\n\t\t\t\t\t\t\t<title>{title}</title>\n\t\t\t\t\t\t</banner>\n\t\t\t\t\t\t<collectionList>\n\t\t\t\t\t\t\t{renderSectionGrid(unwatched, 'New episodes')}\n\t\t\t\t\t\t\t{renderSectionGrid(watched, 'Watched')}\n\t\t\t\t\t\t\t{renderSectionGrid(closed, 'Closed')}\n\t\t\t\t\t\t</collectionList>\n\t\t\t\t\t</stackTemplate>\n\t\t\t\t</document>\n\t\t\t);\n\t\t}));\n}\n\nfunction renderSectionGrid(collection, title) {\n\tlet header;\n\n\tif (title) {\n\t\theader = (\n\t\t\t<header>\n\t\t\t\t<title>{title}</title>\n\t\t\t</header>\n\t\t)\n\t}\n\n\treturn (\n\t\t<grid>\n\t\t\t{header}\n\t\t\t<section>\n\t\t\t\t{collection.map(tvshow => {\n\t\t\t\t\tlet {title, sid, unwatched} = tvshow;\n\t\t\t\t\tlet poster = `http://covers.soap4.me/soap/big/${sid}.jpg`;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Tile\n\t\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\t\tposter={poster}\n\t\t\t\t\t\t\troute=\"tvshow\"\n\t\t\t\t\t\t\tpayload={{tvshow}}\n\t\t\t\t\t\t\tsubtitle={unwatched && `${unwatched} ${plur('episode', unwatched)}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</section>\n\t\t</grid>\n\t)\n}\n","/** @jsx TVDML.jsx */\n\nimport plur from 'plur';\nimport * as TVDML from 'tvdml';\n\nimport {parseTVShowSeasonPage} from '../info';\nimport {getDefault, quality} from '../quality';\nimport {link, fixSpecialSymbols} from '../utils';\n\nimport Loader from '../components/loader';\n\nconst {SD, HD, FULLHD} = quality;\n\nexport default function() {\n\treturn TVDML\n\t\t.createPipeline()\n\t\t.pipe(TVDML.passthrough(({navigation: {tvshow, season}}) => ({tvshow, season})))\n\t\t.pipe(TVDML.render(({season: {season}}) => {\n\t\t\treturn <Loader title={`Season ${season}`} />;\n\t\t}))\n\t\t.pipe(TVDML.passthrough(({tvshow, season: {season}}) => {\n\t\t\treturn parseTVShowSeasonPage(tvshow, season).then(({spoilers}) => ({spoilers}));\n\t\t}))\n\t\t.pipe(TVDML.render(({tvshow, season, spoilers}) => {\n\t\t\tlet {\n\t\t\t\tsid,\n\t\t\t\ttitle,\n\t\t\t\tdescription,\n\t\t\t} = tvshow;\n\n\t\t\tlet {\n\t\t\t\tid,\n\t\t\t} = season;\n\n\t\t\tlet poster = `http://covers.soap4.me/season/big/${id}.jpg`;\n\t\t\tlet episodes = season.episodes\n\t\t\t\t.filter(Boolean)\n\t\t\t\t.map(getDefault);\n\n\t\t\tconsole.log('season', tvshow, season, spoilers);\n\n\t\t\treturn (\n\t\t\t\t<document>\n\t\t\t\t\t<compilationTemplate theme=\"light\">\n\t\t\t\t\t\t<background>\n\t\t\t\t\t\t\t<heroImg src={poster} />\n\t\t\t\t\t\t</background>\n\t\t\t\t\t\t<list>\n\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t<title>{title}</title>\n\t\t\t\t\t\t\t\t<subtitle>Season {season.season}</subtitle>\n\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t{episodes.map((episode, i) => {\n\t\t\t\t\t\t\t\t\tlet {\n\t\t\t\t\t\t\t\t\t\ttitle_en,\n\t\t\t\t\t\t\t\t\t\tspoiler,\n\t\t\t\t\t\t\t\t\t\twatched,\n\t\t\t\t\t\t\t\t\t\tquality,\n\t\t\t\t\t\t\t\t\t\tepisode: episodeIndex,\n\t\t\t\t\t\t\t\t\t} = episode;\n\n\t\t\t\t\t\t\t\t\tlet title = fixSpecialSymbols(title_en);\n\t\t\t\t\t\t\t\t\tlet description = fixSpecialSymbols(spoilers[i]);\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<listItemLockup onSelect={playEpisode(episode)}>\n\t\t\t\t\t\t\t\t\t\t\t<ordinal minLength=\"2\">{episodeIndex}</ordinal>\n\t\t\t\t\t\t\t\t\t\t\t<title style=\"tv-labels-state: marquee-on-highlight\">\n\t\t\t\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t\t\t\t</title>\n\t\t\t\t\t\t\t\t\t\t\t<decorationLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t{watched && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<badge src=\"resource://button-checkmark\" />\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{'  '}\n\t\t\t\t\t\t\t\t\t\t\t\t{!!~[FULLHD, HD].indexOf(quality) && <badge src=\"resource://hd\" />}\n\t\t\t\t\t\t\t\t\t\t\t</decorationLabel>\n\t\t\t\t\t\t\t\t\t\t\t<relatedContent>\n\t\t\t\t\t\t\t\t\t\t\t\t<itemBanner>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<heroImg src={poster} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<description\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmoreLabel=\"more\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tallowsZooming=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"margin: 20 0 0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect={showDescription({title, description})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{description}</description>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{watched ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<buttonLockup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<badge src=\"resource://button-remove\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<title>Mark as New</title>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</buttonLockup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<buttonLockup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<badge src=\"resource://button-add\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<title>Mark as Watched</title>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</buttonLockup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</row>\n\t\t\t\t\t\t\t\t\t\t\t\t</itemBanner>\n\t\t\t\t\t\t\t\t\t\t\t</relatedContent>\n\t\t\t\t\t\t\t\t\t\t</listItemLockup>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</list>\n\t\t\t\t\t</compilationTemplate>\n\t\t\t\t</document>\n\t\t\t);\n\t\t}));\n}\n\nfunction playEpisode(episode) {\n\treturn (event) => {\n\t\tconsole.log('playEpisode', episode);\n\n\t\tlet videoURL = 'http://www.rwdevcon.com/videos/Ray-Wenderlich-Teamwork.mp4';\n\n\t\tlet player = new Player();\n\t\tlet playlist = new Playlist();\n\t\tlet mediaItem = new MediaItem('video', videoURL);\n\n\t\tplayer.playlist = playlist;\n\t\tplayer.playlist.push(mediaItem);\n\t\tplayer.present();\n\t}\n}\n\nfunction showDescription({title, description}) {\n\treturn (event) => {\n\t\tevent.stopPropagation();\n\n\t\tTVDML\n\t\t\t.renderModal(\n\t\t\t\t<document>\n\t\t\t\t\t<descriptiveAlertTemplate>\n\t\t\t\t\t\t<title>\n\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t</title>\n\t\t\t\t\t\t<description>\n\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t</description>\n\t\t\t\t\t</descriptiveAlertTemplate>\n\t\t\t\t</document>\n\t\t\t)\n\t\t\t.sink()\n\t}\n}\n","/** @jsx TVDML.jsx */\n\nimport plur from 'plur';\nimport * as TVDML from 'tvdml';\nimport formatNumber from 'simple-format-number';\n\nimport {get} from '../request/soap';\nimport {getDefault} from '../quality';\nimport {capitalizeText} from '../utils';\nimport {parseTVShowPage} from '../info';\n\nimport Tile from '../components/tile';\nimport Loader from '../components/loader';\n\nconst {Promise} = TVDML;\n\nexport default function() {\n\treturn TVDML\n\t\t.createPipeline()\n\t\t.pipe(TVDML.passthrough(({navigation: {tvshow}}) => ({tvshow})))\n\t\t.pipe(TVDML.render(({tvshow: {title}}) => {\n\t\t\treturn <Loader title={title} />;\n\t\t}))\n\t\t.pipe(TVDML.passthrough(({tvshow: {sid}}) => {\n\t\t\treturn Promise\n\t\t\t\t.all([\n\t\t\t\t\tget(`https://soap4.me/api/soap/`),\n\t\t\t\t\tget(`https://soap4.me/api/episodes/${sid}/`),\n\t\t\t\t])\n\t\t\t\t.then(([series, episodes]) => ({series, episodes}));\n\t\t}))\n\t\t.pipe(TVDML.passthrough(({tvshow}) => {\n\t\t\treturn parseTVShowPage(tvshow).then(extra => ({extra}));\n\t\t}))\n\t\t.pipe(TVDML.render(({tvshow, episodes, extra, series}) => {\n\t\t\tlet {\n\t\t\t\tsid,\n\t\t\t\tyear,\n\t\t\t\ttitle,\n\t\t\t\twatching,\n\t\t\t\timdb_votes,\n\t\t\t\timdb_rating,\n\t\t\t\tdescription,\n\t\t\t\tkinopoisk_votes,\n\t\t\t\tkinopoisk_rating,\n\t\t\t} = tvshow;\n\n\t\t\tlet {\n\t\t\t\tgenres,\n\t\t\t\tstatus,\n\t\t\t\tactors,\n\t\t\t\tcountry,\n\t\t\t\tduration,\n\t\t\t\trecomendations,\n\t\t\t} = extra;\n\n\t\t\tlet isWatching = watching > 0;\n\t\t\tlet poster = `http://covers.soap4.me/soap/big/${sid}.jpg`;\n\n\t\t\tlet seasons = episodes.reduce((result, item) => {\n\t\t\t\tlet seasonIndex = item.season - 1;\n\t\t\t\tlet episodeIndex = item.episode;\n\n\t\t\t\tif (!result[seasonIndex]) {\n\t\t\t\t\tresult[seasonIndex] = {\n\t\t\t\t\t\tid: item.season_id,\n\t\t\t\t\t\tseason: item.season,\n\t\t\t\t\t\tepisodes: [],\n\t\t\t\t\t\tsubtitles: [],\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tlet episodeCollection = result[seasonIndex].episodes;\n\n\t\t\t\tif (~item.translate.toLowerCase().indexOf('—Å—É–±—Ç–∏—Ç—Ä—ã')) {\n\t\t\t\t\tepisodeCollection = result[seasonIndex].subtitles;\n\t\t\t\t}\n\n\t\t\t\tif (!episodeCollection[episodeIndex]) {\n\t\t\t\t\tepisodeCollection[episodeIndex] = {};\n\t\t\t\t}\n\t\t\t\tepisodeCollection[episodeIndex][item.quality] = item;\n\t\t\t\treturn result;\n\t\t\t}, []);\n\n\t\t\tconsole.log('tvshow', tvshow, episodes, seasons, extra, series);\n\n\t\t\treturn (\n\t\t\t\t<document>\n\t\t\t\t\t<productTemplate theme=\"light\">\n\t\t\t\t\t\t<banner>\n\t\t\t\t\t\t\t<infoList>\n\t\t\t\t\t\t\t\t<info>\n\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t<title>Status</title>\n\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t<text>{capitalizeText(status)}</text>\n\t\t\t\t\t\t\t\t</info>\n\t\t\t\t\t\t\t\t<info>\n\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t<title>Genres</title>\n\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t{genres.map(capitalizeText).map(genre => {\n\t\t\t\t\t\t\t\t\t\treturn <text>{genre}</text>;\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</info>\n\t\t\t\t\t\t\t\t<info>\n\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t<title>Actors</title>\n\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t{actors.map(actor => {\n\t\t\t\t\t\t\t\t\t\treturn <text>{actor}</text>;\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</info>\n\t\t\t\t\t\t\t</infoList>\n\t\t\t\t\t\t\t<stack>\n\t\t\t\t\t\t\t\t<title>{title}</title>\n\t\t\t\t\t\t\t\t<row>\n\t\t\t\t\t\t\t\t\t<text>{duration}</text>\n\t\t\t\t\t\t\t\t\t<text>{year}</text>\n\t\t\t\t\t\t\t\t</row>\n\t\t\t\t\t\t\t\t<description\n\t\t\t\t\t\t\t\t\tallowsZooming=\"true\"\n\t\t\t\t\t\t\t\t\tmoreLabel=\"more\"\n\t\t\t\t\t\t\t\t\tonSelect={showFullDescription(tvshow)}\n\t\t\t\t\t\t\t\t>{description}</description>\n\t\t\t\t\t\t\t\t{isWatching ? (\n\t\t\t\t\t\t\t\t\t<row>\n\t\t\t\t\t\t\t\t\t\t<buttonLockup>\n\t\t\t\t\t\t\t\t\t\t\t<badge src=\"resource://button-play\" />\n\t\t\t\t\t\t\t\t\t\t\t<title>Continue Watching</title>\n\t\t\t\t\t\t\t\t\t\t</buttonLockup>\n\t\t\t\t\t\t\t\t\t\t<buttonLockup>\n\t\t\t\t\t\t\t\t\t\t\t<badge src=\"resource://button-remove\" />\n\t\t\t\t\t\t\t\t\t\t\t<title>Stop Watching</title>\n\t\t\t\t\t\t\t\t\t\t</buttonLockup>\n\t\t\t\t\t\t\t\t\t</row>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<row>\n\t\t\t\t\t\t\t\t\t\t<buttonLockup>\n\t\t\t\t\t\t\t\t\t\t\t<badge src=\"resource://button-add\" />\n\t\t\t\t\t\t\t\t\t\t\t<title>Watch</title>\n\t\t\t\t\t\t\t\t\t\t</buttonLockup>\n\t\t\t\t\t\t\t\t\t</row>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</stack>\n\t\t\t\t\t\t\t<heroImg src={poster} />\n\t\t\t\t\t\t</banner>\n\t\t\t\t\t\t<shelf>\n\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t<title>Seasons</title>\n\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t{seasons.map(season => {\n\t\t\t\t\t\t\t\t\tlet {id, episodes} = season;\n\t\t\t\t\t\t\t\t\tlet poster = `http://covers.soap4.me/season/big/${id}.jpg`;\n\t\t\t\t\t\t\t\t\tlet unwatched = episodes.reduce((result, episode) => {\n\t\t\t\t\t\t\t\t\t\treturn result + +!getDefault(episode).watched;\n\t\t\t\t\t\t\t\t\t}, 0);\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Tile\n\t\t\t\t\t\t\t\t\t\t\troute=\"season\"\n\t\t\t\t\t\t\t\t\t\t\tposter={poster}\n\t\t\t\t\t\t\t\t\t\t\tpayload={{tvshow, season}}\n\t\t\t\t\t\t\t\t\t\t\ttitle={`Season ${season.season}`}\n\t\t\t\t\t\t\t\t\t\t\tsubtitle={unwatched && `${unwatched} ${plur('episode', unwatched)}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</shelf>\n\t\t\t\t\t\t<shelf>\n\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t<title>Viewers Also Watched</title>\n\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t{recomendations.map(recomendation => {\n\t\t\t\t\t\t\t\t\tlet {sid} = recomendation;\n\t\t\t\t\t\t\t\t\tlet poster = `http://covers.soap4.me/soap/big/${sid}.jpg`;\n\t\t\t\t\t\t\t\t\tlet tvshow;\n\n\t\t\t\t\t\t\t\t\tseries.some((item) => {\n\t\t\t\t\t\t\t\t\t\tif (item.sid === sid) {\n\t\t\t\t\t\t\t\t\t\t\ttvshow = item;\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\tif (!tvshow) return null;\n\n\t\t\t\t\t\t\t\t\tlet {title} = tvshow;\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Tile\n\t\t\t\t\t\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\t\t\t\t\t\tposter={poster}\n\t\t\t\t\t\t\t\t\t\t\troute=\"tvshow\"\n\t\t\t\t\t\t\t\t\t\t\tpayload={{tvshow}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</shelf>\n\t\t\t\t\t\t<shelf>\n\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t<title>Ratings</title>\n\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t{!!+imdb_rating && (\n\t\t\t\t\t\t\t\t\t<ratingCard>\n\t\t\t\t\t\t\t\t\t\t<title>{(`${imdb_rating}`).slice(0, 3)} / 10</title>\n\t\t\t\t\t\t\t\t\t\t<ratingBadge value={imdb_rating / 10} />\n\t\t\t\t\t\t\t\t\t\t<description>\n\t\t\t\t\t\t\t\t\t\t\tAverage of {formatNumber(+imdb_votes, {fractionDigits: 0})} IMDB user ratings.\n\t\t\t\t\t\t\t\t\t\t</description>\n\t\t\t\t\t\t\t\t\t</ratingCard>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{!!+kinopoisk_rating && (\n\t\t\t\t\t\t\t\t\t<ratingCard>\n\t\t\t\t\t\t\t\t\t\t<title>{(`${kinopoisk_rating}`).slice(0, 3)} / 10</title>\n\t\t\t\t\t\t\t\t\t\t<ratingBadge value={kinopoisk_rating / 10} />\n\t\t\t\t\t\t\t\t\t\t<description>\n\t\t\t\t\t\t\t\t\t\t\tAverage of {formatNumber(+kinopoisk_votes, {fractionDigits: 0})} Kinopoisk user ratings.\n\t\t\t\t\t\t\t\t\t\t</description>\n\t\t\t\t\t\t\t\t\t</ratingCard>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</shelf>\n\t\t\t\t\t</productTemplate>\n\t\t\t\t</document>\n\t\t\t);\n\t\t}));\n}\n\nfunction showFullDescription({title, description}) {\n\treturn (event) => {\n\t\tTVDML\n\t\t\t.renderModal(\n\t\t\t\t<document>\n\t\t\t\t\t<descriptiveAlertTemplate>\n\t\t\t\t\t\t<title>\n\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t</title>\n\t\t\t\t\t\t<description>\n\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t</description>\n\t\t\t\t\t</descriptiveAlertTemplate>\n\t\t\t\t</document>\n\t\t\t)\n\t\t\t.sink()\n\t}\n}\n","const TOKEN = 'soap4me-token';\nconst EXPIRES = 'soap4me-token-expires';\n\nexport function set(token, expires) {\n\tlocalStorage.setItem(TOKEN, token);\n\tlocalStorage.setItem(EXPIRES, (`${expires}000`).slice(0, 13));\n}\n\nexport function get() {\n\tlet token = localStorage.getItem(TOKEN);\n\tlet expires = localStorage.getItem(EXPIRES);\n\n\tif (Date.now() < expires) {\n\t\treturn token;\n\t}\n\n\tremove();\n\treturn null;\n}\n\nexport function remove() {\n\tlocalStorage.removeItem(TOKEN);\n\tlocalStorage.removeItem(EXPIRES);\n}\n","import {navigate} from 'tvdml';\nimport {request} from './request';\n\nconst parser = new DOMParser();\n\nexport function log(message = '') {\n\treturn (payload) => {\n\t\tconsole.log(message, payload);\n\t\treturn payload;\n\t}\n}\n\nexport function link(route, params) {\n\treturn event => navigate(route, params);\n}\n\nexport function getStartParams() {\n\treturn JSON.parse(sessionStorage.getItem('startParams') || '{}');\n}\n\nexport function noop() {\n\treturn () => {};\n}\n\nexport function fixSpecialSymbols(text = '') {\n\treturn text.replace(/&#039;/g, `'`);\n}\n\nexport function capitalize(word) {\n\tword = `${word}`;\n\treturn word.charAt(0).toUpperCase() + word.slice(1);\n}\n\nexport function capitalizeText(text) {\n\treturn `${text}`.split(' ').map(capitalize).join(' ');\n}\n"],"sourceRoot":"/source/"}